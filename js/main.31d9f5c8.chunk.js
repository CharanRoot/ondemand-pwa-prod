(this.webpackJsonpondemand_pwa=this.webpackJsonpondemand_pwa||[]).push([[0],{113:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return v})),a.d(t,"c",(function(){return E}));var n=a(12),r=a.n(n),i=a(16),o=a(138),c=a(84),s=a(308),l=a(10),u=o.a.aws_user_files_s3_bucket_region,p=o.a.aws_user_files_s3_bucket;function d(e){return m.apply(this,arguments)}function m(){return(m=Object(i.a)(r.a.mark((function e(t){var a,n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return a=t.name,n=t.type,i="".concat(Object(c.uuid)()).concat(a),o={bucket:p,key:i,region:u},e.prev=4,e.next=7,l.g.put(i,t,{contentType:n});case 7:return console.log("successfully stored user data!"),e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(4),console.log("error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getImages!",t),a=t.map(b),e.next=4,Promise.all(a);case 4:return n=e.sent,console.log("getImages!",n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.g.get(t.key);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=l.d.getItem(t.key))){e.next=4;break}return console.log("Retrieved cached url for ".concat(t.key,": ").concat(a)),e.abrupt("return",a[0]);case 4:return e.next=6,f([t]);case 6:return a=e.sent,console.log("Retrieved fetched url for ".concat(t.key,": ").concat(a)),n=new Date((new Date).getTime()+84e4).getTime(),l.d.setItem(t.key,a,{expires:n}),e.abrupt("return",a[0]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return w.apply(this,arguments)}function w(){return(w=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map(j),e.next=3,Promise.all(a);case 3:return n=e.sent,console.log("Done!",n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return O.apply(this,arguments)}function O(){return(O=Object(i.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("originalFile instanceof Blob",t instanceof Blob),console.log("originalFile size ".concat(t.size/1024/1024," MB")),a={maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!1},e.prev=3,e.next=6,Object(s.a)(t,a);case 6:return n=e.sent,console.log("compressedFile instanceof Blob",n instanceof Blob),console.log("compressedFile size ".concat(n.size/1024/1024," MB")),e.next=11,d(n);case 11:return e.abrupt("return",e.sent);case 14:e.prev=14,e.t0=e.catch(3),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}},132:function(e,t,a){"use strict";var n=a(12),r=a.n(n),i=a(16),o=a(6),c=a(0),s=a.n(c),l=a(845),u=a(21),p=a(224),d=a(34),m=a(321),f=a(227),h=(a(195),Object(m.a)((function(e){return Object(f.a)({container:{padding:15}})})));t.a=function(e){var t=e.inputimages,a=e.openPop,n=e.closeAlert,c=s.a.useState("paper"),m=Object(o.a)(c,2),f=m[0],b=m[1],g=(s.a.useContext(u.a),s.a.useState([])),v=Object(o.a)(g,2),y=v[0],E=v[1],w=h();s.a.useEffect((function(){(function(){var e=Object(i.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.parse(t),e.next=3,Object(d.getImages)(a);case 3:n=e.sent,console.log("images",n),E(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),s.a.useEffect((function(){a&&b("paper")}),[a]);var j=function(){n(!1)},O=s.a.useRef(null);return s.a.useEffect((function(){if(a){var e=O.current;null!==e&&e.focus()}}),[a]),s.a.createElement(l.a,{open:a,fullScreen:!0,onClose:j,scroll:f,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},s.a.createElement(d.DialogTitle,{id:"scroll-dialog-title",onClose:j},"Ticket Details"),s.a.createElement("div",{className:w.container},s.a.createElement(p.b,null,s.a.createElement("ul",{className:"images"},y.map((function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(p.a,{src:e,alt:"mountains"}))}))))))}},138:function(e,t,a){"use strict";t.a={aws_project_region:"us-east-1",aws_cognito_identity_pool_id:"us-east-1:92478dcd-459f-4cb7-9f48-ba8bfa2a208d",aws_cognito_region:"us-east-1",aws_user_pools_id:"us-east-1_r7Sskomxl",aws_user_pools_web_client_id:"hk1odcmcfrak3dps4m6vpe9pj",oauth:{},aws_appsync_graphqlEndpoint:"https://nftbh5tp35helcndk7y3fyfpnu.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",aws_cloud_logic_custom:[{name:"stripeapi",endpoint:"https://aywl9m8ec4.execute-api.us-east-1.amazonaws.com/prod",region:"us-east-1"},{name:"chatreplyapi",endpoint:"https://qdw6378o3m.execute-api.us-east-1.amazonaws.com/prod",region:"us-east-1"}],aws_user_files_s3_bucket:"ondemandpwa44f797dc09864f198fac6529c16661ab92428-prod",aws_user_files_s3_bucket_region:"us-east-1",aws_mobile_analytics_app_id:"e3097b4665d34a0f880712586626fddd",aws_mobile_analytics_app_region:"us-east-1"}},192:function(e,t){},195:function(e,t,a){},21:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(12),r=a.n(n),i=a(16),o=a(6),c=a(0),s=a.n(c),l=a(10),u=a(85),p=s.a.createContext({user:null,provider:"",name:"",email:"",phoneNumber:"",userId:"",accountType:"",isAuthenticated:function(){return!1},signUp:function(){return new Promise((function(e){return e(0)}))},confirmSignUp:function(){return new Promise((function(e){return e(0)}))},resendSignUp:function(){return new Promise((function(e){return e(0)}))},signIn:function(){return new Promise((function(e){return e(0)}))},signOut:function(){return new Promise((function(e){return e(0)}))},resetPassword:function(){return new Promise((function(e){return e(0)}))},confirmResetPassword:function(){return new Promise((function(e){return e(0)}))}});t.b=function(e){var t=e.children,a=Object(c.useState)(null),n=Object(o.a)(a,2),d=n[0],m=n[1],f=Object(c.useState)(""),h=Object(o.a)(f,2),b=h[0],g=h[1],v=Object(c.useState)(""),y=Object(o.a)(v,2),E=y[0],w=y[1],j=Object(c.useState)(""),O=Object(o.a)(j,2),C=O[0],k=O[1],x=Object(c.useState)(""),S=Object(o.a)(x,2),T=S[0],N=S[1],I=Object(c.useState)(""),R=Object(o.a)(I,2),P=R[0],U=R[1],_=Object(c.useState)(""),q=Object(o.a)(_,2),A=q[0],D=q[1],$=Object(u.g)();Object(c.useEffect)((function(){console.log("checking for authenticated user..."),B()}),[]),Object(c.useEffect)((function(){l.e.listen("auth",(function(e){switch(e.payload.event){case"signIn":B(),$.push("/");break;case"signOut":m(null),g(""),localStorage.setItem("provider",""),w(""),k(""),N(""),U(""),$.push("/")}}))}),[]);var B=function(){l.c.currentAuthenticatedUser().then((function(e){console.log("current",e),m(e);var t=e.email||e.attributes.email||"",a=e.name||e.attributes.email||"",n=localStorage.getItem("provider")||"";U(e.username),w(t),k(a),g(n),D(e.attributes["custom:account_type"]),console.log("provider:",A,e.attributes,e.attributes["custom:account_type"])})).catch((function(e){console.log("no current authenticated user")}))},L=Object(c.useCallback)((function(e,t,a,n){return new Promise(function(){var o=Object(i.a)(r.a.mark((function i(o,c){var s,u,p;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.c.signUp({username:"+1"+a,password:t,attributes:{email:e,phone_number:"+1"+a,"custom:account_type":n}});case 3:s=r.sent,u=s.user,console.log(u),o(u),r.next=21;break;case 9:r.prev=9,r.t0=r.catch(0),console.log(r.t0),p="An internal error occurred.",r.t1=r.t0.code,r.next="UserNotConfirmedException"===r.t1||"PasswordResetRequiredException"===r.t1||"NotAuthorizedException"===r.t1||"UserNotFoundException"===r.t1||"UsernameExistsException"===r.t1?16:18;break;case 16:return p=r.t0.message,r.abrupt("break",20);case 18:return console.log(r.t0),r.abrupt("break",20);case 20:c(p);case 21:case"end":return r.stop()}}),i,null,[[0,9]])})));return function(e,t){return o.apply(this,arguments)}}())}),[]),Y=Object(c.useCallback)((function(e,t){return console.log("confirm sign up",e,t),new Promise(function(){var a=Object(i.a)(r.a.mark((function a(n,i){var o,c,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.c.confirmSignUp("+1"+e,t);case 3:o=a.sent,c=o.user,n(c),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),s=a.t0.message||"An internal error occurred.",i(s);case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e,t){return a.apply(this,arguments)}}())}),[]),F=Object(c.useCallback)((function(e,t){return console.log("sign in",e,t),new Promise(function(){var a=Object(i.a)(r.a.mark((function a(n,i){var o,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l.c.signIn({username:"+1"+e,password:t});case 3:o=a.sent,localStorage.setItem("provider","email"),console.log(o),n(o),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(0),c=a.t0.message||"An internal error occurred.",i(c);case 13:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e,t){return a.apply(this,arguments)}}())}),[]),J=Object(c.useCallback)((function(e){return console.log("resend sign up",e),new Promise((function(t,a){l.c.resendSignUp("+1"+e).then((function(e){t(e)})).catch((function(e){var t=e.message||"An internal error occurred.";a(t)}))}))}),[]),M=Object(c.useCallback)((function(){return console.log("sign out"),new Promise((function(e,t){l.c.signOut().then((function(t){e(t)})).catch((function(e){var a=e.message||"An internal error occurred.";t(a)}))}))}),[]),W=Object(c.useCallback)((function(e){return console.log("reset password",e),new Promise((function(t,a){l.c.forgotPassword("+1"+e).then((function(e){t(e)})).catch((function(e){var t=e.message||"An internal error occurred.";a(t)}))}))}),[]),z=Object(c.useCallback)((function(e,t,a){return console.log("confirm reset password",e,a,t),new Promise((function(n,r){l.c.forgotPasswordSubmit("+1"+e,a,t).then((function(e){return n(e)})).catch((function(e){var t=e.message||"An internal error occurred.";r(t)}))}))}),[]);return s.a.createElement(p.Provider,{value:{user:d,provider:b,name:C,email:E,phoneNumber:T,accountType:A,userId:P,isAuthenticated:function(){return null!==d},signUp:L,confirmSignUp:Y,resendSignUp:J,signIn:F,signOut:M,resetPassword:W,confirmResetPassword:z}},t)}},280:function(e,t){},281:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n=a(0),r=a.n(n),i=a(323),o=a(208),c=a(321),s=a(227),l=Object(c.a)((function(e){return Object(s.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}})})),u=function(e){var t=l();return r.a.createElement("div",null,r.a.createElement(i.a,{className:t.backdrop,open:e.open,onClick:function(){}},r.a.createElement(o.a,{color:"inherit"})))}},282:function(e,t,a){"use strict"},287:function(e,t,a){},34:function(e,t,a){"use strict";var n=a(98);a.d(t,"DialogTitle",(function(){return n.a}));var r=a(113);a.d(t,"getCacheImage",(function(){return r.a})),a.d(t,"getImages",(function(){return r.b})),a.d(t,"handleImageUpload",(function(){return r.c}));a(132);var i=a(280);a.o(i,"TVBackdrop")&&a.d(t,"TVBackdrop",(function(){return i.TVBackdrop}));var o=a(281);a.d(t,"TVBackdrop",(function(){return o.a}));a(282)},353:function(e,t,a){e.exports=a(835)},756:function(e,t,a){},823:function(e,t,a){},835:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a.n(i),c=a(42),s=a(21),l=(a(756),a(125)),u=a(85),p=a(6),d=a(908),m=a(891),f=a(888),h=a(319),b=a(889),g={typography:{fontFamily:["Roboto","sans-serif"].join(",")}},v=Object(h.a)(g),y=function(e){var t=e.children;return r.a.createElement(f.a,{theme:v},r.a.createElement(b.a,null,t))},E=a(79),w=a(892),j=a(321),O=a(227),C=a(60);function k(){return r.a.createElement(E.a,{variant:"body2",color:"textSecondary",align:"center"},"Travtail \u2122 ",r.a.createElement(m.a,{color:"inherit",href:"https://travtail.app/"}),(new Date).getFullYear())}var x=Object(j.a)((function(e){return Object(O.a)({footer:{padding:e.spacing(2),marginTop:"auto",backgroundColor:"#f6f6f6"}})})),S=function(){var e=x(Object(C.a)());return r.a.createElement("footer",{className:e.footer},r.a.createElement(w.a,{maxWidth:"sm"},r.a.createElement(k,null)))},T=a(12),N=a.n(T),I=a(16),R=a(225),P=a(895),U=a(896),_=a(302),q=a.n(_),A=a(301),D=a.n(A),$=a(298),B=a.n($),L=a(160),Y=a.n(L),F=a(300),J=a.n(F),M=a(10),W=a(24),z=a(25),H=a.n(z);function G(){var e=Object(W.a)(["\n  query GetEmployee($id: ID!) {\n    getEmployee(id: $id) {\n      id\n      username\n      registered\n      avatar\n      employeeConversations {\n        items {\n          id\n          name\n          status\n          conversation {\n            id\n            name\n            createdAt\n            associated {\n              items {\n                convoLinkUserId\n                user {\n                  id\n                  username\n                  avatar\n                }\n                convoLinkEmployeeId\n                employee {\n                  id\n                  username\n                  avatar\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return G=function(){return e},e}function V(){var e=Object(W.a)(["\n  query GetUser($id: ID!) {\n    getUser(id: $id) {\n      id\n      username\n      registered\n      avatar\n      userConversations {\n        items {\n          id\n          name\n          status\n          conversation {\n            id\n            name\n            createdAt\n            associated {\n              items {\n                convoLinkUserId\n                user {\n                  phoneNumber\n                  id\n                  username\n                  avatar\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return V=function(){return e},e}function K(){var e=Object(W.a)(["\nquery messageByReceiver($receiver: String!, $isSent: String! ) {\n  messageByReceiver(receiver: $receiver,  isSent: {\n    eq: $isSent\n  }) \n   {\n      items {\n        id\n        isSent\n        owner\n        conversation {\n          id\n        }\n      }\n    nextToken\n   }\n}\n"]);return K=function(){return e},e}function Z(){var e=Object(W.a)(['\nquery getOpenTicket($status: String!, $ticketFilter: String! ) {\n  jobsByStatus(status: $status,  ticketFilterTime: {\n    beginsWith: { ticketFilter:  $ticketFilter, time:"2020" }\n  }) \n   {\n      items {\n        id\n        category\n        content\n        time\n        destination\n        price\n        title\n        county\n        source\n        status\n        ownerUploadImages\n        employeeUploadImages\n        execptedPrice\n        ticketType\n        ticketEmployeeId\n        ticketUserId\n        category\n        ticketEmployeeInfo\n        ticketFilter\n        tip\n        materialsCostPrice\n        materialsCostComments\n      }\n    nextToken\n   }\n}\n']);return Z=function(){return e},e}function X(){var e=Object(W.a)(["\n  query SearchConvoLinks(\n    $filter: SearchableConvoLinkFilterInput\n    $sort: SearchableConvoLinkSortInput\n    $limit: Int\n    $nextToken: Int\n  ) {\n    searchConvoLinks(\n      filter: $filter\n      sort: $sort\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        name\n        status\n        convoLinkUserId\n        user {\n          id\n          username\n          registered\n        }\n        conversation {\n          id\n          name\n          createdAt\n        }\n      }\n      nextToken\n    }\n  }\n"]);return X=function(){return e},e}function Q(){var e=Object(W.a)(["\n  query SearchUsers(\n    $filter: SearchableUserFilterInput\n    $sort: SearchableUserSortInput\n    $limit: Int\n    $nextToken: Int\n  ) {\n    searchUsers(\n      filter: $filter\n      sort: $sort\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        username\n        registered\n        userConversations {\n          items {\n            id\n            name\n            status\n            convoLinkUserId\n          }\n          nextToken\n        }\n      }\n      nextToken\n    }\n  }\n"]);return Q=function(){return e},e}function ee(){var e=Object(W.a)(["\n  query SearchMessages(\n    $filter: SearchableMessageFilterInput\n    $sort: SearchableMessageSortInput\n    $limit: Int\n    $nextToken: Int\n  ) {\n    searchMessages(\n      filter: $filter\n      sort: $sort\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        id\n        content\n        createdAt\n        owner\n        chatbot\n        isSent\n        file {\n          bucket\n          region\n          key\n        }\n        messageConversationId\n        conversation {\n          id\n          name\n          createdAt\n        }\n      }\n      nextToken\n    }\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(W.a)(["\n  query GetConvo($id: ID!, $nextToken: String) {\n    getConvo(id: $id) {\n      id\n      messages(sortDirection: DESC, limit: 20, nextToken: $nextToken) {\n        nextToken\n        items {\n          id\n          content\n          createdAt\n          owner\n          chatbot\n          isSent\n          file\n          messageConversationId\n        }\n      }\n    }\n  }\n"]);return te=function(){return e},e}function ae(){var e=Object(W.a)(["\n  query GetFullEmployee($id: ID!) {\n    getEmployee(id: $id) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n    }\n  }\n"]);return ae=function(){return e},e}function ne(){var e=Object(W.a)(["\n  query GetUser($id: ID!) {\n    getUser(id: $id) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n      usertype\n      rating\n      reviews {\n        items {\n          id\n          userId\n          review\n          createdAt\n        }\n      }\n    }\n  }\n"]);return ne=function(){return e},e}function re(){var e=Object(W.a)(["\n  query GetUser($id: ID!) {\n    getUser(id: $id) {\n      id\n      username\n      skills\n      rating\n      reviews {\n        items {\n          id\n          userId\n          review\n          createdAt\n        }\n      }\n    }\n  }\n"]);return re=function(){return e},e}function ie(){var e=Object(W.a)(["\n  query GetUser($id: ID!) {\n    getUser(id: $id) {\n      id\n      username\n      county\n      avatar\n      address\n      cardInfo\n      active\n      skills\n      rating\n      tickets {\n        items {\n          ticket{\n          id\n          content\n          time\n          destination\n          price\n          title\n          county\n          source\n          status\n          ticketEmployeeId\n          ticketEmployeeInfo\n          ticketUserId\n          ticketType\n          ticketFilter\n          empClosedComment\n          userClosedComment\n          ownerUploadImages\n          employeeUploadImages\n          execptedPrice\n          category\n          tip\n          materialsCostPrice\n          materialsCostComments\n          users {\n            items {\n              user{\n              id\n              }\n            }\n          }\n        }\n        }\n      }\n    }\n  }\n"]);return ie=function(){return e},e}var oe=H()(ie()),ce=H()(re()),se=H()(ne()),le=(H()(ae()),H()(te())),ue=(H()(ee()),H()(Q()),H()(X()),H()(Z())),pe=H()(K()),de=H()(V()),me=(H()(G()),a(894));function fe(){var e=Object(W.a)(["\nmutation createReview($input: CreateReviewInput!) {\n  createReview(input: $input) {\n      id\n      userId\n      review\n      createdAt\n    }\n  }\n"]);return fe=function(){return e},e}function he(){var e=Object(W.a)(["\n  mutation deleteUserTicket($id: ID!) {\n    deleteUserTicket(input: { id: $id }) {\n      id\n    }\n  }\n"]);return he=function(){return e},e}function be(){var e=Object(W.a)(['\n  mutation updateMessage($id: ID!) {\n    updateMessage(input: { id: $id, isSent: "true" }) {\n      id\n      content\n      createdAt\n      owner\n      chatbot\n      isSent\n    }\n  }\n']);return be=function(){return e},e}function ge(){var e=Object(W.a)(['\n  mutation updateConvoLink($id: ID!) {\n    updateConvoLink(input: { id: $id, status: "READY" }) {\n      id\n      name\n      convoLinkUserId\n      status\n      conversation {\n        id\n        name\n        createdAt\n        associated {\n          items {\n            convoLinkUserId\n            user {\n              id\n              username\n              avatar\n            }\n          }\n        }\n      }\n    }\n  }\n']);return ge=function(){return e},e}function ve(){var e=Object(W.a)(["\n  mutation createConvoLink($input: CreateConvoLinkInput!) {\n    createConvoLink(input: $input) {\n      id\n      name\n      status\n      conversation {\n        id\n        name\n        createdAt\n        associated {\n          items {\n            convoLinkUserId\n            user {\n              id\n              username\n              avatar\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return ve=function(){return e},e}function ye(){var e=Object(W.a)(["\n  mutation RegisterEmployee($input: CreateUserInput!) {\n    registerEmployee(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n      userConversations {\n        items {\n          id\n          name\n          status\n          conversation {\n            id\n            name\n            createdAt\n            associated {\n              items {\n                convoLinkUserId\n                user {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return ye=function(){return e},e}function Ee(){var e=Object(W.a)(["\n  mutation UpdateEmployee($input: UpdateEmployeeInput!) {\n    updateEmployee(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n  }\n}\n"]);return Ee=function(){return e},e}function we(){var e=Object(W.a)(["\n  mutation RegisterFullEmployee($input: CreateEmployeeInput!) {\n    registerEmployee(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n  }\n}\n"]);return we=function(){return e},e}function je(){var e=Object(W.a)(["\n  mutation RegisterUser($input: CreateUserInput!) {\n    registerUser(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n      userConversations {\n        items {\n          id\n          name\n          status\n          conversation {\n            id\n            name\n            createdAt\n            associated {\n              items {\n                convoLinkUserId\n                user {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return je=function(){return e},e}function Oe(){var e=Object(W.a)(["\n  mutation UpdateUser($input: UpdateUserInput!) {\n    updateUser(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      rating\n      cardInfo\n  }\n}\n"]);return Oe=function(){return e},e}function Ce(){var e=Object(W.a)(["\n  mutation registerEmployeeUser($input: CreateEmployeeInput!) {\n    registerEmployee(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n  }\n}\n"]);return Ce=function(){return e},e}function ke(){var e=Object(W.a)(["\n  mutation RegisterFullUser($input: CreateUserInput!) {\n    registerFullUser(input: $input) {\n      id\n      username\n      registered\n      active\n      address\n      zipcode\n      latitudes\n      longitudes\n      cardInfo\n  }\n}\n"]);return ke=function(){return e},e}function xe(){var e=Object(W.a)(["\n  mutation CreateMessage($input: CreateMessageInput!) {\n    createMessage(input: $input) {\n      id\n      content\n      createdAt\n      owner\n      chatbot\n      isSent\n      file\n      messageConversationId\n      conversation {\n        id\n        name\n        createdAt\n      }\n    }\n  }\n"]);return xe=function(){return e},e}function Se(){var e=Object(W.a)(['\n    mutation UpdateTicket($id: ID!, $ticketEmployeeId: ID!, $price: String, $ticketEmployeeInfo: String, $ticketFilter: String, $time: String) {\n      updateTicket(\n        input: {\n          id: $id\n          price: $price\n          ticketEmployeeId: $ticketEmployeeId\n          ticketEmployeeInfo: $ticketEmployeeInfo\n          status: "assinged",\n          ticketFilter : $ticketFilter\n          time : $time\n        }\n      )\n    {\n      id\n      content\n      time\n      destination\n      price\n      title\n      county\n      source\n      status\n      ticketFilter\n      ticketEmployeeId\n      ticketEmployeeInfo\n      ownerUploadImages\n      ticketType\n      execptedPrice\n      ticketUserId\n      category\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n']);return Se=function(){return e},e}function Te(){var e=Object(W.a)(["\n    mutation UpdateTicket($input: UpdateTicketInput!\n      ) {\n      updateTicket(\n        input: $input\n      )\n    {\n      id\n      content\n      time\n      destination\n      price\n      title\n      county\n      source\n      status\n      ownerUploadImages\n      employeeUploadImages\n      ticketEmployeeId\n      empClosedComment\n      empClosedTime\n      ticketType\n      ticketFilter\n      ticketUserId\n      category\n      execptedPrice\n      ticketEmployeeInfo\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n  "]);return Te=function(){return e},e}function Ne(){var e=Object(W.a)(["\n  mutation CreateTicket($input: CreateTicketInput!) {\n    createTicket(input: $input) {\n      id\n      countAndId\n      ticketUserId\n      owner\n      content\n      time\n      destination\n      price\n      title\n      county\n      source\n      status\n      ticketFilter\n      ticketEmployeeInfo\n      ticketEmployeeId\n      ticketUserInfo\n      ownerUploadImages\n      employeeUploadImages\n      empClosedComment\n      ticketType\n      execptedPrice\n      category\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n"]);return Ne=function(){return e},e}function Ie(){var e=Object(W.a)(["\n  mutation CreateConvo($input: CreateConversationInput!) {\n    createConvo(input: $input) {\n      id\n      name\n      createdAt\n      associated {\n        items {\n          convoLinkUserId\n          user {\n            id\n            username\n          }\n        }\n      }\n    }\n  }\n"]);return Ie=function(){return e},e}function Re(){var e=Object(W.a)(["\n  mutation CreateUserTicket($input: CreateUserTicketInput!) {\n    createUserTicket(input: $input) {\n      id\n      ticketID\n      userID\n    }\n  }\n"]);return Re=function(){return e},e}var Pe=H()(Re()),Ue=H()(Ie()),_e=H()(Ne()),qe=H()(Te()),Ae=H()(Se()),De=H()(xe()),$e=(H()(ke()),H()(Ce()),H()(Oe())),Be=H()(je()),Le=(H()(we()),H()(Ee()),H()(ye()),H()(ve())),Ye=H()(ge()),Fe=H()(be()),Je=H()(he()),Me=H()(fe()),We=function(){var e=Object(I.a)(N.a.mark((function e(t,a){var n,r,i,o,c,s,l,u,p,d,m,f;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t,r={name:"direct"},e.next=5,M.a.graphql(Object(M.i)(Ue,{input:r}));case 5:return i=e.sent,console.log("conversation",i),o={convoLinkUserId:n,convoLinkConversationId:i.data.createConvo.id,status:"CREATING",name:"chat"},c={convoLinkUserId:a,convoLinkConversationId:i.data.createConvo.id,status:"CREATING",name:"chat"},e.next=11,M.a.graphql(Object(M.i)(Le,{input:o}));case 11:return s=e.sent,e.next=14,M.a.graphql(Object(M.i)(Le,{input:c}));case 14:return l=e.sent,u=s.data.createConvoLink.id,p=l.data.createConvoLink.id,e.next=19,M.a.graphql(Object(M.i)(Ye,{id:u}));case 19:return d=e.sent,console.log(" mm next steps",d),e.next=23,M.a.graphql(Object(M.i)(Ye,{id:p}));case 23:return m=e.sent,console.log(" xy next steps",m),console.log("item created!",i),f=m.data.updateConvoLink,e.abrupt("return",{conversation:f.conversation,conversationName:f.name});case 30:e.prev=30,e.t0=e.catch(0),console.log("error creating talk...",e.t0);case 33:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(t,a){return e.apply(this,arguments)}}(),ze=function(){var e=Object(I.a)(N.a.mark((function e(t,a,n){var r,i,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("findConverationWithUser",t,a,n),e.next=3,M.a.graphql(Object(M.i)(de,{id:t}));case 3:if(r=e.sent,console.log("fetchDate",r),!(r.data.getUser&&r.data.getUser.userConversations.items.length>0)){e.next=9;break}return i=r.data.getUser.userConversations.items,o=i.find((function(e){var t=e.conversation,n=(t=void 0===t?{}:t).associated,r=(n=void 0===n?{}:n).items;return(void 0===r?[]:r).some((function(e){return e.convoLinkUserId===a}))})),e.abrupt("return",o?{conversation:o.conversation,conversationName:o.name}:null);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),He=function(){var e=Object(I.a)(N.a.mark((function e(t,a,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(t,a,n);case 2:if(r=e.sent,console.log("existing conv",r),r){e.next=9;break}return console.log("no convo, launch new"),e.next=8,We(t,a);case 8:return e.abrupt("return",e.sent);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(I.a)(N.a.mark((function e(t,a){var n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(se,{id:t}));case 2:if(!(n=e.sent).data.getUser){e.next=8;break}return r=n.data.getUser,i=Ve(r.rating,a),e.next=8,M.a.graphql(Object(M.i)($e,{input:{id:t,rating:i}}));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ve=function(e,t){if(e&&e.length>1){var a=JSON.parse(e),n=parseFloat(a.rating),r=parseInt(a.total),i=(r*n+parseFloat(t))/(r+1);return JSON.stringify({rating:i,total:r+1})}return JSON.stringify({rating:t,total:1})},Ke=a(299),Ze=a.n(Ke),Xe=a(893),Qe=Object(j.a)((function(e){return Object(O.a)({appBar:{boxShadow:"none"},appBarBefore:{border:1},menuButton:{marginRight:e.spacing(1)},spacer:{flexGrow:1}})})),et=function(e){var t=e.header,a=Qe(Object(C.a)()),i=Object(n.useContext)(s.a),o=Object(u.g)(),c=r.a.useState(!1),l=Object(p.a)(c,2),d=l[0],m=l[1],f=r.a.useState(!1),h=Object(p.a)(f,2),b=h[0],g=h[1];r.a.useEffect((function(){if(t&&i&&i.userId&&i.user){var e=i.userId;!function(){var t=Object(I.a)(N.a.mark((function t(){var a,n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.graphql(Object(M.i)(pe,{receiver:e,isSent:"false"}));case 2:a=t.sent,console.log("getUserMessages",a),a.data.messageByReceiver&&a.data.messageByReceiver.items.length>0&&(g(!0),n=a.data.messageByReceiver.items,n.filter((function(e){var t="40a6d5e4-50c8-4530-af38-18497f87711f";return"github"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_CODE&&(t="b1589897-8074-4076-b73d-f81f095e1d1f"),e.owner===t})).length>0&&m(!0));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}}),[t,i.userId]);var v=function(){var e=Object(I.a)(N.a.mark((function e(){var t,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.userId,a="40a6d5e4-50c8-4530-af38-18497f87711f","github"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_CODE&&(a="b1589897-8074-4076-b73d-f81f095e1d1f"),e.next=5,He(t,a,!0);case 5:n=e.sent,o.push({pathname:"/chat",state:{conversation:n,user:t}});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=i.isAuthenticated()&&t?r.a.createElement("div",null,"profile"===t?r.a.createElement(R.a,{className:a.menuButton,onClick:function(){return i.signOut()}},r.a.createElement(B.a,{style:{color:"white"}})):null,"Home"===t?r.a.createElement("span",null,r.a.createElement(Xe.a,{title:"Review"},r.a.createElement(R.a,{className:a.menuButton,onClick:function(){return o.push("/review")}},r.a.createElement(Ze.a,{style:{color:"white"}}))),r.a.createElement(Xe.a,{title:"Profile"},r.a.createElement(R.a,{className:a.menuButton,onClick:function(){return o.push("/profile")}},r.a.createElement(Y.a,{style:{color:"white"}}))),r.a.createElement(Xe.a,{title:"Contact Support"},r.a.createElement(R.a,{color:"primary",className:a.menuButton,onClick:v},r.a.createElement(me.a,{color:"secondary",overlap:"circle",badgeContent:" ",invisible:!d},r.a.createElement(J.a,{style:{color:"white"}})))),r.a.createElement(Xe.a,{title:"Chat"},r.a.createElement(R.a,{"aria-label":"show 17 new notifications",color:"primary",className:a.menuButton,onClick:function(){return o.push("/chat")}},r.a.createElement(me.a,{color:"secondary",overlap:"circle",badgeContent:" ",invisible:!b},r.a.createElement(D.a,{style:{color:"white"}}))))):null):null;return r.a.createElement(P.a,{position:"fixed",className:i.isAuthenticated()?a.appBarBefore:a.appBar},r.a.createElement(U.a,null,r.a.createElement(R.a,{edge:"start",className:a.menuButton,onClick:function(){return o.push("/")},color:"inherit","aria-label":"home"},r.a.createElement(q.a,{style:{color:"white"}})),r.a.createElement("div",{className:a.spacer}),y))},tt=a(897),at=Object(j.a)((function(e){return Object(O.a)({root:{display:"flex",flexDirection:"column",minHeight:"100vh"},main:{marginBottom:e.spacing(2)}})})),nt=function(e){var t=e.title,a=e.children,i=at(Object(C.a)());return Object(n.useEffect)((function(){document.title=t}),[t]),r.a.createElement(y,null,r.a.createElement("div",{className:i.root},r.a.createElement(tt.a,null),r.a.createElement(et,null),r.a.createElement(w.a,{className:i.main,maxWidth:"sm"},a),r.a.createElement(S,null)))},rt=a(4),it=a(303),ot=a.n(it),ct=a(305),st=a.n(ct),lt=a(306),ut=a.n(lt),pt=a(73),dt=a.n(pt),mt=a(175),ft=a(898),ht=a(942),bt=a(899),gt=a(304),vt=a.n(gt),yt={success:ot.a,warning:vt.a,error:st.a,info:ut.a},Et=Object(j.a)((function(e){return{success:{backgroundColor:mt.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:ft.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function wt(e){var t=Et(),a=e.className,n=e.message,i=e.onClose,o=e.variant,c=yt[o];return r.a.createElement(bt.a,{className:Object(rt.a)(t[o],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(c,{className:Object(rt.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(R.a,{key:"close","aria-label":"close",color:"inherit",onClick:i},r.a.createElement(dt.a,{className:t.icon}))]})}var jt,Ot=Object(j.a)((function(e){return{margin:{margin:e.spacing(1)}}})),Ct=function(e){var t=e.variant,a=e.message,i=e.setMessage,o=Ot(),c=Object(n.useState)(!1),s=Object(p.a)(c,2),l=s[0],u=s[1];Object(n.useEffect)((function(){u(""!==a)}),[a]),Object(n.useEffect)((function(){!l&&i("")}),[l]);var d=function(e,t){"clickaway"!==t&&u(!1)},m=r.a.createElement(ht.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:l,autoHideDuration:3e3,onClose:d},r.a.createElement(wt,{onClose:d,className:o.margin,variant:t,message:a}));return r.a.createElement("div",null,m)},kt=a(900),xt=Object(j.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(C.a)();return Object(O.a)({form:{width:"100%",marginTop:e.spacing(1)},textfield:{margin:e.spacing(2,0,0)},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{margin:e.spacing(3,0,2)},links:{padding:"0px 5px"},btn:{width:"100%",maxWidth:"260px",marginTop:e.spacing(2)},btnFederated:{backgroundColor:"white",color:e.palette.grey[600]},btnElems:{display:"grid",width:"100%",gridTemplateColumns:"repeat(12, 2fr)"},btnIcon:{display:"flex",gridColumnEnd:"span 2"},btnLabel:{height:"100%",display:"flex",justifyContent:"center",gridColumnEnd:"span 10",textTransform:"none"},input:{padding:"11.5px 10px"},container:{display:"grid",width:"100%",gridTemplateColumns:"repeat(12, 2fr)"}})})),St=function(e){var t=e.children,a=e.disabled,n=xt();return r.a.createElement(kt.a,{type:"submit",disabled:a,fullWidth:!0,variant:"contained",color:"primary",size:"large",className:n.submit},t)},Tt=a(901),Nt=a(902),It=a(903),Rt=a(946),Pt=a(904),Ut=a(905),_t=a(906),qt=function(e){var t=e.setPassword,a=e.nonError,i=Object(n.useState)(!1),o=Object(p.a)(i,2),c=o[0],s=o[1],l=Object(n.useState)(!0),u=Object(p.a)(l,2),d=u[0],m=u[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),b=h[0],g=h[1],v=null,y=xt(),E=d?null:r.a.createElement(Tt.a,{error:!d,id:"standard-weight-helper-text"},b);return r.a.createElement(Nt.a,{required:!0,variant:"outlined",fullWidth:!0,style:{marginTop:16},className:y.textfield},r.a.createElement(It.a,{htmlFor:"outlined-adornment-password",error:!d},"Password"),r.a.createElement(Rt.a,{required:!0,error:!d,id:"outlined-adornment-password",type:c?"text":"password",onChange:function(e){return n=e.target.value,null!==v&&clearTimeout(v),void(v=setTimeout((function(){if(a&&!0===a){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,32}$/.test(n);m(e),g(n.length>0?"Password is too weak \u2013 please enter at least 8 characters with a minimum of one number and one uppercase letter":"Enter password."),t(e?n:"")}else g("Enter password."),t(n);v=null}),200));var n},endAdornment:r.a.createElement(Pt.a,{position:"end"},r.a.createElement(R.a,{"aria-label":"toggle password visibility",onClick:function(){s(!c)},onMouseDown:function(e){e.preventDefault()}},c?r.a.createElement(Ut.a,null):r.a.createElement(_t.a,null))),labelWidth:80}),E)},At=a(943),Dt=a(307),$t=a.n(Dt),Bt=function(e){var t=e.title,a=e.children,n=xt();return r.a.createElement(w.a,{maxWidth:"xs"},r.a.createElement(tt.a,null),r.a.createElement("div",{className:n.paper},r.a.createElement(At.a,{className:n.avatar},r.a.createElement($t.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},t),a))},Lt=a(933),Yt=function(e){var t=e.setPhoneNumber,a=Object(n.useState)(!0),i=Object(p.a)(a,2),o=i[0],c=i[1],s=Object(n.useState)(""),l=Object(p.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(""),f=Object(p.a)(m,2),h=f[0],b=f[1],g=null;return r.a.createElement(Lt.a,{error:!o,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"phoneNumber",label:"Phone Number",name:"phoneNumber",autoComplete:"phoneNumber",value:h,helperText:u,InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"+1")},onChange:function(e){!function(e){null!==g&&clearTimeout(g),g=setTimeout((function(){e=e.replace(/[^0-9]/g,"");var a=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(e);console.log("phone",e),c(a),d(a?"":e.length>0?"Invalid phone number.":"Enter phoneNumber."),b(e),t(a?e:""),g=null}),50)}(e.currentTarget.value.replace(/[^0-9]/g,""))}})},Ft=function(){var e=Object(n.useContext)(s.a),t=Object(n.useState)(""),a=Object(p.a)(t,2),i=(a[0],a[1],Object(n.useState)("")),o=Object(p.a)(i,2),c=o[0],l=o[1],f=Object(n.useState)(!0),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(""),y=Object(p.a)(v,2),E=y[0],w=y[1],j=Object(u.g)(),O=Object(n.useState)(""),C=Object(p.a)(O,2),k=C[0],x=C[1];Object(n.useEffect)((function(){g(!(k&&c))}),[k,c]);var S=Object(n.useCallback)((function(e){w(e)}),[]),T=xt();return r.a.createElement(nt,{title:"Travtail Sign In"},r.a.createElement(Bt,{title:"Sign In"},r.a.createElement(Ct,{variant:"error",message:E,setMessage:function(e){return S(e)}}),r.a.createElement("form",{className:T.form,onSubmit:function(t){return function(t){t.preventDefault(),e.signIn(k,c).then((function(e){console.log("sign in success!")})).catch((function(e){w("User is not confirmed."!==e?"User does not exist."===e?"This account does not exist. Please signup using the sign up link above.":e:"Your account is not confirmed. Confirm your account by clicking the confirm sign up link above")}))}(t)},noValidate:!0},r.a.createElement(Yt,{setPhoneNumber:function(e){return x(e)}}),r.a.createElement(qt,{setPassword:function(e){return l(e)}}),r.a.createElement(St,{disabled:b},"Sign In"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,xs:4,className:T.links},r.a.createElement(m.a,{href:"#",onClick:function(){return j.push("/auth/resetpassword")},variant:"body2"},"Forget Password")),r.a.createElement(d.a,{item:!0,xs:5,className:T.links},r.a.createElement(m.a,{href:"#",onClick:function(){return j.push("/auth/signup/confirmemail")},variant:"body2"},"Confirm Sign Up")),r.a.createElement(d.a,{item:!0,xs:3,className:T.links},r.a.createElement(m.a,{href:"#",onClick:function(){return j.push("/auth/signup")},variant:"body2"},"Sign Up"))))))},Jt=a(934),Mt=a(939),Wt=a(909),zt=a(843),Ht=function(e){var t=e.setEmail,a=Object(n.useState)(!0),i=Object(p.a)(a,2),o=i[0],c=i[1],s=Object(n.useState)(""),l=Object(p.a)(s,2),u=l[0],d=l[1],m=null;return r.a.createElement(Lt.a,{error:!o,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",helperText:u,onChange:function(e){return a=e.currentTarget.value,null!==m&&clearTimeout(m),void(m=setTimeout((function(){var e=/\S+@\S+\.\S+/.test(a);c(e),d(e?"":a.length>0?"Invalid email.":"Enter email."),t(e?a:""),m=null}),200));var a}})},Gt=function(e){var t=e.authpass,a=e.setRePassword,i=Object(n.useState)(!1),o=Object(p.a)(i,2),c=o[0],s=o[1],l=Object(n.useState)(!0),u=Object(p.a)(l,2),d=u[0],m=u[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),b=h[0],g=h[1],v=null,y=xt(),E=d?null:r.a.createElement(Tt.a,{error:!d,id:"standard-weight-helper-text"},b);return r.a.createElement(Nt.a,{required:!0,variant:"outlined",fullWidth:!0,style:{marginTop:"16px",marginBottom:"16px"},className:y.textfield},r.a.createElement(It.a,{htmlFor:"outlined-adornment-re-password",error:!d},"Re-Enter-Password"),r.a.createElement(Rt.a,{required:!0,error:!d,id:"outlined-adornment-re-password",type:c?"text":"password",onChange:function(e){return n=e.target.value,null!==v&&clearTimeout(v),void(v=setTimeout((function(){var e=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,32}$/.test(n);m(e),g(n.length>0?"Password is too weak \u2013 please enter at least 8 characters with a minimum of one number and one uppercase letter":"Enter password."),t!==n&&(m(!1),g("Password mismatch")),a(e?n:""),v=null}),200));var n},endAdornment:r.a.createElement(Pt.a,{position:"end"},r.a.createElement(R.a,{"aria-label":"toggle password visibility",onClick:function(){s(!c)},onMouseDown:function(e){e.preventDefault()}},c?r.a.createElement(Ut.a,null):r.a.createElement(_t.a,null))),labelWidth:80}),E)},Vt=function(){var e=Object(n.useContext)(s.a),t=Object(n.useState)(""),a=Object(p.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(""),l=Object(p.a)(c,2),f=l[0],h=l[1],b=Object(n.useState)(""),g=Object(p.a)(b,2),v=g[0],y=g[1],E=Object(n.useState)(""),w=Object(p.a)(E,2),j=w[0],O=w[1],C=Object(n.useState)(!0),k=Object(p.a)(C,2),x=k[0],S=k[1],T=Object(n.useState)(""),N=Object(p.a)(T,2),I=N[0],R=N[1],P=Object(u.g)(),U=r.a.useState(""),_=Object(p.a)(U,2),q=_[0],A=_[1];Object(n.useEffect)((function(){S(!(i&&f&&j&&q)),f!==v&&S(!0)}),[i,f,v,j,q]);var D=Object(n.useCallback)((function(e){R(e)}),[]),$=xt();return r.a.createElement(nt,{title:"Sign Up"},r.a.createElement(Bt,{title:"Sign Up"},r.a.createElement(Ct,{variant:"error",message:I,setMessage:function(e){return D(e)}}),r.a.createElement("form",{className:$.form,onSubmit:function(t){return function(t){t.preventDefault();var a=j.replace(/^\D+/g,"");e.signUp(i,f,a,q).then((function(e){P.push("/auth/signup/confirm",a)})).catch((function(e){console.error("error:",e),R(e)}))}(t)},noValidate:!0},r.a.createElement(Yt,{setPhoneNumber:function(e){return O(e)}}),r.a.createElement(Ht,{setEmail:function(e){return o(e)}}),r.a.createElement(qt,{setPassword:function(e){return h(e)}}),r.a.createElement(Gt,{authpass:f,setRePassword:function(e){return y(e)}}),r.a.createElement(Nt.a,{className:$.form,component:"fieldset"},r.a.createElement(zt.a,{component:"legend"},"Account Type"),r.a.createElement(Mt.a,{row:!0,"aria-label":"position",value:q,onChange:function(e){A(e.target.value)}},r.a.createElement(Wt.a,{value:"Customer",control:r.a.createElement(Jt.a,null),label:"Customer"}),r.a.createElement(Wt.a,{value:"Employee",control:r.a.createElement(Jt.a,null),label:"Service Provider"}))),r.a.createElement(St,{disabled:x},"Sign Up"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,xs:!0,className:$.links},r.a.createElement(m.a,{href:"#",onClick:function(){return P.push("/auth")},variant:"body2"},"Sign In")),r.a.createElement(d.a,{item:!0,className:$.links},r.a.createElement(m.a,{href:"#",onClick:function(){return P.push("/auth/signup/confirmemail")},variant:"body2"},"Confirm Sign Up"))))))},Kt=function(e){var t=e.setCode,a=Object(n.useState)(""),i=Object(p.a)(a,2),o=i[0],c=i[1],s=null;return r.a.createElement(Lt.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"confirmation",label:"Confirmation Code",name:"confirmation",helperText:o,onChange:function(e){return a=e.currentTarget.value,null!==s&&clearTimeout(s),void(s=setTimeout((function(){var e=6===a.length;c(e?"":"Incorrect code length."),t(e?a:""),s=null}),300));var a}})},Zt=function(e){var t=Object(n.useContext)(s.a),a=Object(n.useState)(""),i=Object(p.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(!0),f=Object(p.a)(l,2),h=f[0],b=f[1],g=Object(n.useState)(""),v=Object(p.a)(g,2),y=v[0],E=v[1],w=Object(n.useState)(""),j=Object(p.a)(w,2),O=j[0],C=j[1],k=Object(u.g)(),x=e.location.state||"";Object(n.useEffect)((function(){b(!o)}),[o]);var S=Object(n.useCallback)((function(e){E(e)}),[]),T=Object(n.useCallback)((function(e){C(e)}),[]),N=xt();return r.a.createElement(nt,{title:"Travtail Confirm Sign Up"},r.a.createElement(Bt,{title:"Confirm Sign Up"},r.a.createElement(Ct,{variant:"error",message:y,setMessage:function(e){return S(e)}}),r.a.createElement(Ct,{variant:"success",message:O,setMessage:function(e){return T(e)}}),r.a.createElement("form",{className:N.form,onSubmit:function(e){return function(e){e.preventDefault(),t.confirmSignUp(x,o).then((function(e){console.log(e),k.push("/")})).catch((function(e){console.error("error:",e),E(e)}))}(e)},noValidate:!0},r.a.createElement(Kt,{setCode:function(e){return c(e)}}),r.a.createElement(St,{disabled:h},"Confirm"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,xs:!0,className:N.links}),r.a.createElement(d.a,{item:!0,className:N.links},r.a.createElement(m.a,{href:"#",onClick:function(){t.resendSignUp(x).then((function(e){C("Code resent to your phoneNumber.")})).catch((function(e){console.error("error:",e),E(e)}))},variant:"body2"},"Resend code"))))))},Xt=function(){var e=Object(n.useContext)(s.a),t=Object(n.useState)(""),a=Object(p.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(!0),l=Object(p.a)(c,2),f=l[0],h=l[1],b=Object(n.useState)(""),g=Object(p.a)(b,2),v=g[0],y=g[1],E=Object(n.useState)(""),w=Object(p.a)(E,2),j=w[0],O=w[1],C=Object(u.g)(),k=Object(n.useState)(""),x=Object(p.a)(k,2),S=x[0],T=x[1];Object(n.useEffect)((function(){h(!(S&&i))}),[S,i]);var N=Object(n.useCallback)((function(e){y(e)}),[]),I=Object(n.useCallback)((function(e){O(e)}),[]),R=xt();return r.a.createElement(nt,{title:"Travtail Confirm Sign Up"},r.a.createElement(Bt,{title:"Confirm Sign Up"},r.a.createElement(Ct,{variant:"error",message:v,setMessage:function(e){return N(e)}}),r.a.createElement(Ct,{variant:"success",message:j,setMessage:function(e){return I(e)}}),r.a.createElement("form",{className:R.form,onSubmit:function(t){return function(t){t.preventDefault(),e.confirmSignUp(S,i).then((function(e){console.log(e),C.push("/")})).catch((function(e){console.error("error:",e),y(e)}))}(t)},noValidate:!0},r.a.createElement(Yt,{setPhoneNumber:function(e){return T(e)}}),r.a.createElement(Kt,{setCode:function(e){return o(e)}}),r.a.createElement(St,{disabled:f},"Confirm"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,xs:!0,className:R.links}),r.a.createElement(d.a,{item:!0,className:R.links},r.a.createElement(m.a,{href:"#",onClick:function(){e.resendSignUp(S).then((function(e){O("Code resent to your phoneNumber.")})).catch((function(e){console.error("error:",e),y(e)}))},variant:"body2"},"Resend code"))))))},Qt=function(){var e=Object(n.useContext)(s.a),t=Object(n.useState)(""),a=Object(p.a)(t,2),i=a[0],o=a[1],c=Object(n.useState)(!0),l=Object(p.a)(c,2),d=l[0],m=l[1],f=Object(n.useState)(""),h=Object(p.a)(f,2),b=(h[0],h[1],Object(u.g)()),g=Object(n.useState)(""),v=Object(p.a)(g,2),y=v[0],E=v[1];Object(n.useEffect)((function(){m(!y)}),[y]);var w=Object(n.useCallback)((function(e){o(e)}),[]),j=xt();return r.a.createElement(nt,{title:"Travtail Reset Password"},r.a.createElement(Bt,{title:"Reset Password"},r.a.createElement(Ct,{variant:"error",message:i,setMessage:function(e){return w(e)}}),r.a.createElement("form",{className:j.form,onSubmit:function(t){return function(t){t.preventDefault(),e.resetPassword(y).then((function(e){console.log("response",e,y),b.push("/auth/resetpassword/confirm",y)})).catch((function(e){console.error("error:",e),o(e)}))}(t)},noValidate:!0},r.a.createElement(Yt,{setPhoneNumber:function(e){return E(e)}}),r.a.createElement(St,{disabled:d},"Reset"))))},ea=function(e){var t=Object(n.useContext)(s.a),a=Object(n.useState)(""),i=Object(p.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(""),f=Object(p.a)(l,2),h=f[0],b=f[1],g=Object(n.useState)(!0),v=Object(p.a)(g,2),y=v[0],E=v[1],w=Object(n.useState)(""),j=Object(p.a)(w,2),O=j[0],C=j[1],k=Object(n.useState)(""),x=Object(p.a)(k,2),S=x[0],T=x[1],N=Object(u.g)(),I=e.location.state||"";Object(n.useEffect)((function(){E(!(h&&o))}),[h,o]);var R=Object(n.useCallback)((function(e){C(e)}),[]),P=Object(n.useCallback)((function(e){T(e)}),[]),U=xt();return r.a.createElement(nt,{title:"Travtail Confirm Reset"},r.a.createElement(Bt,{title:"Reset Password"},r.a.createElement(Ct,{variant:"error",message:O,setMessage:function(e){return R(e)}}),r.a.createElement(Ct,{variant:"success",message:S,setMessage:function(e){return P(e)}}),r.a.createElement("form",{className:U.form,onSubmit:function(e){return function(e){e.preventDefault(),t.confirmResetPassword(I,o,h).then((function(e){console.log(e),N.push("/")})).catch((function(e){console.error("error:",e),C(e)}))}(e)},noValidate:!0},r.a.createElement(qt,{setPassword:function(e){return c(e)}}),r.a.createElement(Kt,{setCode:function(e){return b(e)}}),r.a.createElement(St,{disabled:y},"Confirm"),r.a.createElement(d.a,{container:!0},r.a.createElement(d.a,{item:!0,xs:!0,className:U.links}),r.a.createElement(d.a,{item:!0,className:U.links},r.a.createElement(m.a,{href:"#",onClick:function(){t.resendSignUp(I).then((function(e){T("Code resent to your email.")})).catch((function(e){console.error("error:",e),C(e)}))},variant:"body2"},"Resend code"))))))},ta=function(){var e=Object(n.useContext)(s.a),t=Object(u.g)();Object(n.useEffect)((function(){console.log("authenticated?",e.isAuthenticated()),e.isAuthenticated()&&t.push("/")}),[]),e.isAuthenticated()&&t.push("/");var a=e.isAuthenticated()?null:r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/auth",component:Ft}),r.a.createElement(u.b,{exact:!0,path:"/auth/signup",component:Vt}),r.a.createElement(u.b,{exact:!0,path:"/auth/signup/confirm",component:Zt}),r.a.createElement(u.b,{exact:!0,path:"/auth/signup/confirmemail",component:Xt}),r.a.createElement(u.b,{exact:!0,path:"/auth/resetpassword",component:Qt}),r.a.createElement(u.b,{exact:!0,path:"/auth/resetpassword/confirm",component:ea}));return r.a.createElement(r.a.Fragment,null,a)},aa=a(18),na=a(226),ra=a(941),ia=a(912),oa=a(938),ca=a(17);!function(e){e.APPROXIMATE="APPROXIMATE",e.GEOMETRIC_CENTER="GEOMETRIC_CENTER",e.RANGE_INTERPOLATED="RANGE_INTERPOLATED",e.ROOFTOP="ROOFTOP"}(jt||(jt={}));var sa=[{value:"Personal Helper",label:"Personal Shopper/Helper"},{value:"Plumbing Services",label:"Plumber"},{value:"Handyman Services",label:"Handyman"},{value:"Appliance Repair/Installation Services",label:"Appliance Repair/Installation Services"},{value:"Cleaning Services",label:"Cleaning Services"},{value:"Lawn Mower/Landscaping/Tree Services",label:"Lawn Mower/Landscaping/Tree Services"},{value:"Delivery Services",label:"Delivery Services"},{value:"Moving/Hauling Services",label:"Moving/Hauling Services"},{value:"General Services",label:"General Services"}],la=a(176),ua=function(e){r.a.useEffect((function(){e.input&&e.input.length>1&&l(e.input)}),[e.input]);var t=Object(la.a)({requestOptions:{},debounce:500}),a=t.ready,i=t.value,o=t.suggestions,c=o.status,s=o.data,l=t.setValue,u=t.clearSuggestions,p=(Object(n.useRef)(),function(t){var a=t.description;return function(){l(a,!1),u(),Object(la.b)({address:a}).then((function(t){var a=t[0].geometry.location,n=a.lat,r=a.lng;return t[0].latitudes=n.toString(),t[0].longitudes=r.toString(),e.googleAddressReturn(t),Object(la.c)(t[0]).then((function(a){var n=a.lat,r=a.lng;t[0].latitudes=n.toString(),t[0].longitudes=r.toString(),e.googleAddressReturn(t)}))})).catch((function(e){console.log("\ud83d\ude31 Error: ",e)}))}});return r.a.createElement("div",null,r.a.createElement(Lt.a,{required:!0,label:e.label,fullWidth:!0,disabled:!a,onChange:function(e){l(e.target.value)},value:i,autoComplete:"billing address-level2"}),"OK"===c&&r.a.createElement("ul",null,s.map((function(e){var t=e.id,a=e.structured_formatting,n=a.main_text,i=a.secondary_text;return r.a.createElement("li",{key:t,onClick:p(e)},r.a.createElement("strong",null,n)," ",r.a.createElement("small",null,i))}))))},pa=function(e){var t=[{long_name:"924",short_name:"924",types:["street_number"]},{long_name:"Players Court",short_name:"Players Ct",types:["route"]},{long_name:"Players Club of Brentwood",short_name:"Players Club of Brentwood",types:["neighborhood","political"]},{long_name:"Nashville",short_name:"Nashville",types:["locality","political"]},{long_name:"Davidson County",short_name:"Davidson County",types:["administrative_area_level_2","political"]},{long_name:"Tennessee",short_name:"TN",types:["administrative_area_level_1","political"]},{long_name:"United States",short_name:"US",types:["country","political"]},{long_name:"37211",short_name:"37211",types:["postal_code"]}],a=(t=e[0].address_components).filter((function(e){return!!e.types.includes("street_number")})),n=t.filter((function(e){return!!e.types.includes("route")})),r=t.filter((function(e){return!!e.types.includes("postal_code")})),i=t.filter((function(e){return!!e.types.includes("country")})),o=t.filter((function(e){return!!e.types.includes("administrative_area_level_1")})),c=t.filter((function(e){return!!e.types.includes("locality")})),s=t.filter((function(e){return!!e.types.includes("administrative_area_level_2")})),l={address1:a[0]?a[0].long_name:n[0].long_name,city:c[0]?c[0].long_name:"",county:s[0].long_name,state:o[0].long_name,country:i[0].long_name,zip:r[0].long_name,latitudes:e[0].latitudes,longitudes:e[0].longitudes,formatted_address:e[0].formatted_address};return console.log("address",l),l},da=a(120),ma=a.n(da),fa=a(34),ha=a(936),ba=Object(j.a)((function(e){return{buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},description:{"& div":{minHeight:"80px !important",alignItems:"start !important"}}}})),ga=function(e){var t=r.a.useContext(s.a),a=ba(),i=function(e){var t=e.target,a=t.name,n=t.value;j(Object(ca.a)({},w,Object(aa.a)({},a,n)))},o=Object(n.useState)([]),c=Object(p.a)(o,2),l=c[0],u=c[1],m=function(){var a=Object(I.a)(N.a.mark((function a(){var n,r,i,o,c,s;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=t.user.attributes.phone_number,r=t.user.attributes.email,!e.address){a.next=8;break}i=JSON.parse(e.address),o=Object(ca.a)({},w,{pictures:i.pictures,phoneNumber:n,email:r}),e.nextButton(JSON.stringify(o)),a.next=21;break;case 8:if(D(!0),console.log("value",w,R),!(R.length>0)){a.next=19;break}return a.next=13,Object(fa.handleImageUpload)(R);case 13:c=a.sent,console.log("S3path",c),s=Object(ca.a)({},w,{pictures:JSON.stringify(c),phoneNumber:n,email:r}),e.nextButton(JSON.stringify(s)),a.next=20;break;case 19:Y("picture missing");case 20:D(!1);case 21:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();r.a.useEffect((function(){var t=function(){var e=Object(I.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=JSON.parse(t),n=null,!a.pictures){e.next=8;break}return r=JSON.parse(a.pictures),e.next=6,Object(fa.getImages)(r);case 6:n=e.sent,console.log("images",n);case 8:j(Object(ca.a)({},a,{pictures:n})),a.skills&&a.skills.length>2&&u(JSON.parse(a.skills)),D(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.address&&(D(!0),t(e.address))}),[e.address]);var f=r.a.useState(!1),h=Object(p.a)(f,2),b=h[0],g=h[1];r.a.useEffect((function(){if(t&&t.userId&&t.user){var e=t.user.attributes["custom:account_type"];g("Customer"!==e)}}),[t.userId]);var v=Object(n.useState)({firstName:"",lastName:"",middelName:"",address1:"",address2:"",city:"",state:"",zip:"",country:"",county:"",latitudes:"",longitudes:"",skills:"",aboutme:"",pictures:""}),y=Object(p.a)(v,2),w=y[0],j=y[1],O=Object(n.useState)(!0),C=Object(p.a)(O,2),k=C[0],x=C[1];Object(n.useEffect)((function(){var e=w.firstName,t=w.lastName,a=w.address1,n=w.city,r=w.zip,i=w.country,o=w.aboutme,c=w.skills;!1===b&&(c="dummy"),x(!(e&&t&&a&&n&&r&&i&&o&&c))}),[w]);var S=Object(n.useState)([]),T=Object(p.a)(S,2),R=T[0],P=T[1],U=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=Object(n.useState)(!1),q=Object(p.a)(_,2),A=q[0],D=q[1],$=Object(n.useState)(""),B=Object(p.a)($,2),L=B[0],Y=B[1],F=r.a.useCallback((function(e){Y(e)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",gutterBottom:!0},"Your Information"),r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"firstName",name:"firstName",label:"First name",fullWidth:!0,onChange:i,value:w.firstName,autoComplete:"fname"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{id:"middelName",name:"middelName",label:"Middle Name",fullWidth:!0,onChange:i,value:w.middelName,autoComplete:"middelName"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"lastName",name:"lastName",label:"Last name",fullWidth:!0,onChange:i,value:w.lastName,autoComplete:"lname"})),w.address1.length<2?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(ua,{label:"Enter your Home address",googleAddressReturn:function(e){console.log("address",e);var t=pa(e);j(Object(ca.a)({},w,{},t))}})):r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{required:!0,id:"address1",name:"address1",label:"Address line 1",fullWidth:!0,onChange:i,value:w.address1,autoComplete:"billing address-line1"})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{id:"address2",name:"address2",label:"Address line 2",fullWidth:!0,onChange:i,value:w.address2,autoComplete:"billing address-line2"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"city",name:"city",label:"City",fullWidth:!0,onChange:i,value:w.city,autoComplete:"billing address-level2"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{id:"state",name:"state",label:"State/Province/Region",onChange:i,value:w.state,fullWidth:!0})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"zip",name:"zip",label:"Zip / Postal code",fullWidth:!0,onChange:i,value:w.zip,autoComplete:"billing postal-code"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"country",name:"country",label:"Country",fullWidth:!0,onChange:i,value:w.country,autoComplete:"billing country"})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{className:a.description,multiline:!0,required:!0,id:"aboutme",name:"aboutme",label:"About Me",fullWidth:!0,onChange:i,value:w.aboutme,autoComplete:"content"})),b?r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(ha.a,{multiple:!0,id:"multiple-limit-tags",options:sa,getOptionLabel:function(e){return e.label},renderInput:function(e){return r.a.createElement(Lt.a,Object.assign({},e,{variant:"outlined",label:"Skills",placeholder:"Select Two Skills"}))},onChange:function(e,t){t.length<3?(u(t),j(Object(ca.a)({},w,Object(aa.a)({},"skills",JSON.stringify(t))))):Y("you can't select more than two skills")},value:l})):null,r.a.createElement(d.a,{item:!0,xs:12},w.pictures?r.a.createElement("img",{style:{width:"300px",height:"300px"},src:w.pictures}):r.a.createElement(ma.a,{withPreview:!0,withIcon:!0,onChange:U,singleImage:!0,imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:5242880}))),r.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(kt.a,{disabled:k,variant:"contained",color:"primary",className:a.button,onClick:m},"next")),r.a.createElement(fa.TVBackdrop,{open:A}),r.a.createElement(Ct,{variant:"error",message:L,setMessage:function(e){return F(e)}})))},va=a(911),ya=a(124),Ea=a.n(ya),wa=a(217),ja=a(214),Oa=(a(196),Object(j.a)((function(e){return{buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},date:{display:"block",boxShadow:"none",margin:"10px 0 5px 0",padding:"10px 14px",fontFamily:"Roboto,sans-serif",fontWeight:400,fontSize:16,lineHeight:1.43,borderBottom:"1px solid rgba(0, 0, 0, 0.42)"}}}))),Ca=[{value:"Paypal",label:"Paypal"},{value:"Venmo",label:"Venmo"}],ka=function(e){var t=Oa(),a=function(e){var t=e.target,a=t.name,n=t.value;if("secondaryPaymentType"==a||"dob"==a||"secondaryPayment"==a)f(Object(ca.a)({},m,Object(aa.a)({},a,n)));else{(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&f(Object(ca.a)({},m,Object(aa.a)({},a,n)))}var r=m.routingNumber,i=m.bankAccountNumber;if("reroutingNumber"===a&&n.length>0&&s(n!==r?Object(ca.a)({},c,Object(aa.a)({},a,n)):Object(ca.a)({},c,Object(aa.a)({},a,""))),"rebankAccountNumber"===a&&n.length>0&&s(n!==i?Object(ca.a)({},c,Object(aa.a)({},a,n)):Object(ca.a)({},c,Object(aa.a)({},a,""))),"ssn"===a&&n.length>0&&(9===n.length?s(Object(ca.a)({},c,Object(aa.a)({},a,""))):s(Object(ca.a)({},c,Object(aa.a)({},a,n)))),"secondaryPayment"===a&&n.length>0){/\S+@\S+\.\S+/.test(e.target.value)?s(Object(ca.a)({},c,Object(aa.a)({},a,""))):s(Object(ca.a)({},c,Object(aa.a)({},a,n)))}},i=Object(n.useState)({routingNumber:"",bankAccountNumber:"",ssn:"",backgroundcheck:!1,secondaryPayment:"",secondaryPaymentType:"",dob:"",reroutingNumber:"",rebankAccountNumber:""}),o=Object(p.a)(i,2),c=o[0],s=o[1];Object(n.useEffect)((function(){if(e.payment){var t=JSON.parse(e.payment);t.dob=new Date(t.dob),f(JSON.parse(e.payment))}}),[e.payment]);var l=Object(n.useState)({routingNumber:"",bankAccountNumber:"",ssn:"",backgroundcheck:!1,secondaryPayment:"",secondaryPaymentType:"",dob:"",reroutingNumber:"",rebankAccountNumber:""}),u=Object(p.a)(l,2),m=u[0],f=u[1],h=Object(n.useState)(""),b=Object(p.a)(h,2),g=b[0],v=b[1],y=Object(n.useCallback)((function(e){v(e)}),[]),w=Object(n.useState)(!0),j=Object(p.a)(w,2),O=j[0],C=j[1];return Object(n.useEffect)((function(){var e=m.routingNumber,t=m.bankAccountNumber,a=m.ssn,n=m.dob;C(!(e&&t&&a&&n))}),[m]),r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h6",gutterBottom:!0},"Payment method"),r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,md:6},r.a.createElement(Lt.a,{required:!0,id:"routingNumber",name:"routingNumber",label:"Routing Number",onChange:a,value:m.routingNumber,fullWidth:!0})),r.a.createElement(d.a,{item:!0,xs:12,md:6},r.a.createElement(Lt.a,{required:!0,id:"reroutingNumber",name:"reroutingNumber",label:"Reenter Routing Number",fullWidth:!0,onChange:a,value:m.reroutingNumber,error:c.reroutingNumber.length>1||void 0,helperText:c.reroutingNumber.length>1?"Routing number mismatch":void 0})),r.a.createElement(d.a,{item:!0,xs:12,md:6},r.a.createElement(Lt.a,{required:!0,id:"bankAccountNumber",name:"bankAccountNumber",label:"Bank Account Number",onChange:a,value:m.bankAccountNumber,fullWidth:!0})),r.a.createElement(d.a,{item:!0,xs:12,md:6},r.a.createElement(Lt.a,{required:!0,id:"rebankAccountNumber",name:"rebankAccountNumber",label:"Reenter Bank Account Number",fullWidth:!0,onChange:a,value:m.rebankAccountNumber,error:c.rebankAccountNumber.length>1||void 0,helperText:c.rebankAccountNumber.length>1?"Bank Account Number mismatached":void 0})),r.a.createElement(va.a,{variant:"middle"}),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{required:!0,id:"ssn",name:"ssn",label:"Enter SSN for Background Check*",error:c.ssn.length>1||void 0,helperText:c.ssn.length>1?"SSN should 9 digits":void 0,fullWidth:!0,onChange:a,value:m.ssn})),r.a.createElement(d.a,{item:!0,xs:12,md:6},r.a.createElement("label",null,"Select Your Date of Birth *:"),r.a.createElement(Ea.a,{selected:Date.parse(m.dob),onChange:function(e){console.log("event",e),f(Object(ca.a)({},m,Object(aa.a)({},"dob",e)))},maxDate:Object(ja.default)(new Date,18),placeholderText:"Click to select a date",dateFormat:"yyyy-MM-dd",className:t.date,popperClassName:"some-custom-class",popperPlacement:"top-end",showYearDropdown:!0,dateFormatCalendar:"MMMM",yearDropdownItemNumber:15,scrollableYearDropdown:!0,popperModifiers:{offset:{enabled:!0,offset:"5px, 10px"},preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})),r.a.createElement(va.a,null),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{id:"secondaryPaymentType",name:"secondaryPaymentType",label:"SecondPaymentType",select:!0,value:m.secondaryPaymentType,onChange:a,SelectProps:{native:!0},helperText:"Please select Secondary Payment",variant:"outlined"},Ca.map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{required:!0,id:"secondaryPayment",name:"secondaryPayment",label:"Enter Your Email for Secondary Payment",fullWidth:!0,onChange:a,value:m.secondaryPayment,error:c.secondaryPayment.length>1||void 0,helperText:c.secondaryPayment.length>1?"Email Id in wrong format":void 0})),r.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement("div",{className:t.buttons},r.a.createElement(kt.a,{variant:"contained",onClick:e.backButton,className:t.button},"Back"),r.a.createElement(kt.a,{disabled:O,variant:"contained",color:"primary",onClick:function(){var t=m.routingNumber,a=m.bankAccountNumber,n=m.ssn,r=m.reroutingNumber,i=m.rebankAccountNumber;return r!==t?(v("Routing number mismattched"),void C(!0)):a!==i?(v("Account number mismattched"),void C(!0)):t.length<6?(v("routing number should be greater then 6 digits."),void C(!0)):a.length<6?(v("bank account number should be greater then 6 digits."),void C(!0)):n.length<2?(v("SSN Number missing"),void C(!0)):void e.nextButton(JSON.stringify(Object(ca.a)({},m,{dob:new Date(m.dob),checkr_dob:Object(wa.default)(new Date(m.dob),"yyyy-MM-dd")})))},className:t.button},"Save")))),r.a.createElement(Ct,{variant:"error",message:g,setMessage:function(e){return y(e)}}))},xa=Object(j.a)((function(e){return Object(O.a)({appBar:{top:"auto",bottom:0},paper:{paddingBottom:50},root:{display:"flex",flexDirection:"column",minHeight:"90vh"},appBarSpacer:e.mixins.toolbar,stickToBottom:{},main:{flexGrow:1,display:"flex",minHeight:"90vh",paddingLeft:10,paddingRight:10,paddingTop:5},rootB:{}})})),Sa=function(e){var t=e.title,a=e.children,i=e.header;Object(n.useEffect)((function(){document.title=t}));Object(u.g)(),r.a.useContext(s.a);var o=xa(),c=r.a.useState("home"),l=Object(p.a)(c,2);l[0],l[1];return r.a.createElement(y,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,null),r.a.createElement(et,{header:i}),r.a.createElement("main",null,r.a.createElement("div",{className:o.appBarSpacer}),r.a.createElement(na.a,{square:!0,className:o.paper},r.a.createElement(w.a,{className:o.main},a))),r.a.createElement(P.a,{position:"fixed",color:"primary",className:o.appBar})))},Ta=a(323),Na=a(208),Ia=a(77),Ra=a(177),Pa=function(){var e=Object(I.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={response:!0,body:{email:t,phone:a},headers:{}},e.next=3,M.a.post("stripeapi","/stripe/createcustomer",n);case 3:return r=e.sent,console.log("setupIntents",r),e.abrupt("return",{customerId:r.data.url.id,customerKey:r.data.intent.client_secret});case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Ua=function(){var e=Object(I.a)(N.a.mark((function e(t,a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={response:!0,body:{customerId:t,money:100*parseFloat(a)},headers:{}},e.next=3,M.a.post("stripeapi","/stripe/createpayment",n);case 3:r=e.sent,console.log("setupIntents",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),_a=function(){var e=Object(I.a)(N.a.mark((function e(t,a){var n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(se,{id:t}));case 2:if(!(n=e.sent).data.getUser){e.next=10;break}return r=n.data.getUser,i=JSON.parse(r.cardInfo),console.log("payment completed",r,i),e.next=9,Ua(i.customerId,a);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),qa=(a(823),Object(j.a)((function(e){return{buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)}}}))),Aa=function(e){var t=Object(Ia.useStripe)(),a=Object(Ia.useElements)(),n=qa(),i=r.a.useContext(s.a),o=r.a.useState(!1),c=Object(p.a)(o,2),l=c[0],u=c[1];r.a.useEffect((function(){}),[e.payment]);var m=function(){var n=Object(I.a)(N.a.mark((function n(r){var o,c,s,l;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t&&a){n.next=3;break}return n.abrupt("return");case 3:if(!(w.name.length<2)){n.next=6;break}return v("Enter Name"),n.abrupt("return");case 6:return u(!0),o=i.user.attributes.phone_number,c=i.user.attributes.email,n.next=11,Pa(c,o);case 11:return s=n.sent,n.next=14,t.confirmCardSetup(s.customerKey,{payment_method:{card:a.getElement(Ia.CardNumberElement),billing_details:{name:w.name}}});case 14:(l=n.sent).error?(v(l.error.message),console.log("esult.setupIntent.payment_method",l)):(console.log("esult.setupIntent.payment_method",l.setupIntent),u(!1),e.nextButton(JSON.stringify(Object(ca.a)({},s,{name:w.name}))));case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),f=r.a.useMemo((function(){return{style:{base:{fontSize:"16px",color:"#424770",letterSpacing:"0.025em",fontFamily:"Source Code Pro, monospace","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}}),["16px"]),h=r.a.useState(""),b=Object(p.a)(h,2),g=b[0],v=b[1],y=r.a.useState({cardNumber:"",expiry:"",cvc:"",name:""}),E=Object(p.a)(y,2),w=E[0],j=E[1],O=r.a.useCallback((function(e){v(e)}),[]);return r.a.createElement("form",{onSubmit:m},e.payment&&e.payment.length>0?r.a.createElement(d.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement("div",null," Currently, you will not be able to change your payment details here. Contact us at contact@travtail.com to request for changes to your payment details.")):r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{required:!0,id:"firstName",name:"firstName",label:"Full Name as per Credit card",fullWidth:!0,onChange:function(e){var t=e.target.value;j(Object(ca.a)({},w,{name:t}))},value:w.name,autoComplete:"fname"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement("label",null,"Card number",r.a.createElement(Ia.CardNumberElement,{options:f,onReady:function(){console.log("CardNumberElement [ready]")},onChange:function(e){console.log("CardNumberElement [change]",e)},onBlur:function(){console.log("CardNumberElement [blur]")},onFocus:function(){console.log("CardNumberElement [focus]")}}))),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement("label",null,"Expiration date",r.a.createElement(Ia.CardExpiryElement,{options:f,onReady:function(){console.log("CardNumberElement [ready]")},onChange:function(e){console.log("CardNumberElement [change]",e)},onBlur:function(){console.log("CardNumberElement [blur]")},onFocus:function(){console.log("CardNumberElement [focus]")}}))),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement("label",null,"CVC",r.a.createElement(Ia.CardCvcElement,{options:f,onReady:function(){console.log("CardNumberElement [ready]")},onChange:function(e){console.log("CardNumberElement [change]",e)},onBlur:function(){console.log("CardNumberElement [blur]")},onFocus:function(){console.log("CardNumberElement [focus]")}}))),r.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement("div",{className:n.buttons},r.a.createElement(kt.a,{variant:"contained",onClick:e.backButton,className:n.button},"Back"),r.a.createElement(kt.a,{disabled:!t,variant:"contained",color:"primary",onClick:m,className:n.button},"Save"))),r.a.createElement(Ct,{variant:"error",message:g,setMessage:function(e){return O(e)}})),r.a.createElement(fa.TVBackdrop,{open:l}))},Da=Object(Ra.a)("pk_test_Wks4vayZlORiZoodc5IA0RhA00RaDpuklR");Da="github"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_CODE?Object(Ra.a)("pk_live_MwU71H90UfINPNxAcboGFHlp009uyMDvzF"):Object(Ra.a)("pk_test_Wks4vayZlORiZoodc5IA0RhA00RaDpuklR");var $a=function(e){return r.a.createElement(Ia.Elements,{stripe:Da},r.a.createElement(Aa,{address:e.address,payment:e.payment,nextButton:e.nextButton,backButton:e.backButton}))},Ba=Object(j.a)((function(e){return{appBar:{position:"relative"},layout:Object(aa.a)({width:"auto"},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(aa.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),La=function(){var e=Ba(),t=r.a.useState(0),a=Object(p.a)(t,2),i=a[0],o=a[1],c=r.a.useState(""),l=Object(p.a)(c,2),d=l[0],m=l[1],f=r.a.useState(""),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Object(n.useState)(""),y=Object(p.a)(v,2),w=y[0],j=y[1],O=Object(n.useState)(!0),C=Object(p.a)(O,2),k=C[0],x=C[1],S=Object(u.g)(),T=r.a.useContext(s.a),R=Object(n.useState)(!1),P=Object(p.a)(R,2),U=P[0],_=P[1],q=r.a.useState(!1),A=Object(p.a)(q,2),D=A[0],$=A[1],B=["Your Information","Payment Details"];Object(n.useEffect)((function(){"github"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_CODE||navigator.geolocation.getCurrentPosition((function(e){console.log("position",e),e.coords.latitude&&e.coords.longitude||j("longitude and latitude missing")}),(function(e){j(e.message)}),{enableHighAccuracy:!0,timeout:2e4,maximumAge:1e3})}),[]),Object(n.useEffect)((function(){if(T&&T.userId&&T.user){var e=T.user.attributes["custom:account_type"];_("Customer"!==e);var t=se,a=T.userId;!function(){var e=Object(I.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(t,{id:a}));case 2:n=e.sent,console.log("fetchDate",n),n.data.getUser&&(x(!1),J(n.data.getUser),m(n.data.getUser.address),g(n.data.getUser.cardInfo));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}}),[T.userId]);var L=r.a.useState(),Y=Object(p.a)(L,2),F=Y[0],J=Y[1],W=function(){var e=Object(I.a)(N.a.mark((function e(t){var a,n,r,i,o,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(!0),a=T.userId,n=T.user.attributes["custom:account_type"],r=T.user.attributes.phone_number,i=T.user.attributes.email,o=k?Be:$e,e.next=8,M.a.graphql(Object(M.i)(o,{input:{id:a,username:JSON.parse(d).firstName,registered:"yes",active:"Customer"===n||!!(null===F||void 0===F?void 0:F.active),usertype:"Customer"===n?"Customer":"Employee",address:d,zipcode:JSON.parse(d).zip,latitudes:JSON.parse(d).latitudes,longitudes:JSON.parse(d).longitudes,aboutme:JSON.parse(d).aboutme,avatar:JSON.parse(d).pictures,cardInfo:t,county:JSON.parse(d).county,skills:JSON.parse(d).skills,emailid:i,phoneNumber:r}}));case 8:c=e.sent,console.log("response",c),$(!1),S.push("/"),M.b.record({name:k?"createProfile":"updateProfile",attributes:{id:a}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("nextButton",t),0!=i){e.next=5;break}m(t),e.next=9;break;case 5:if(1!=i){e.next=9;break}return g(t),W(t),e.abrupt("return");case 9:H();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var H=function(){o(i+1)},G=function(){o(i-1)},V=Object(n.useCallback)((function(e){j(e)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Sa,{title:"Profile List",header:"profile"},r.a.createElement(tt.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(na.a,{className:e.paper},r.a.createElement(ra.a,{activeStep:i,className:e.stepper},B.map((function(e){return r.a.createElement(ia.a,{key:e},r.a.createElement(oa.a,null,e))}))),r.a.createElement(r.a.Fragment,null,i===B.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{variant:"h5",gutterBottom:!0},"Need Update BackEnd.")):r.a.createElement(r.a.Fragment,null,function(e){switch(e){case 0:return r.a.createElement(ga,{address:d,nextButton:z});case 1:return U?r.a.createElement(ka,{payment:b,nextButton:z,backButton:G}):r.a.createElement($a,{address:d,payment:b,nextButton:z,backButton:G});default:throw new Error("Unknown step")}}(i)))))),r.a.createElement(Ct,{variant:"error",message:w,setMessage:function(e){return V(e)}}),r.a.createElement(Ta.a,{className:e.backdrop,open:D},r.a.createElement(Na.a,{color:"inherit"})))},Ya=a(223),Fa=a(907),Ja=a(916),Ma=a(917),Wa=a(910);function za(){var e=Object(W.a)(["\n  subscription OnUpdateConvoLink($convoLinkUserId: ID, $status: String) {\n    onUpdateConvoLink(convoLinkUserId: $convoLinkUserId, status: $status) {\n      id\n      name\n      status\n      conversation {\n        id\n        name\n        createdAt\n        associated {\n          items {\n            convoLinkUserId\n            user {\n              id\n              username\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return za=function(){return e},e}function Ha(){var e=Object(W.a)(["\n  subscription onUpdatedTicketByUser($ticketUserId: String!) {\n    onUpdatedTicketByUser(ticketUserId: $ticketUserId) {\n      id\n      content\n      time\n      destination\n      ticketType\n      price\n      category\n      title\n      county\n      source\n      status\n      ticketFilter\n      ticketUserId\n      ticketEmployeeId\n      ownerUploadImages\n      ticketEmployeeInfo\n      empClosedComment\n      empClosedTime\n      execptedPrice\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n"]);return Ha=function(){return e},e}function Ga(){var e=Object(W.a)(["\n  subscription OnUpdatedTicket($ticketFilter: String!) {\n    onUpdatedTicket(ticketFilter: $ticketFilter) {\n      id\n      content\n      time\n      category\n      destination\n      ticketType\n      price\n      title\n      county\n      source\n      status\n      ticketFilter\n      ticketUserId\n      ownerUploadImages\n      ticketEmployeeId\n      ticketEmployeeInfo\n      empClosedComment\n      empClosedTime\n      execptedPrice\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n"]);return Ga=function(){return e},e}function Va(){var e=Object(W.a)(["\n  subscription OnCreateTicket($ticketFilter: String!) {\n    onCreateTicket(ticketFilter: $ticketFilter) {\n      id\n      countAndId\n      ticketUserId\n      category\n      owner\n      content\n      time\n      destination\n      price\n      title\n      county\n      source\n      status\n      ticketEmployeeInfo\n      ticketEmployeeId\n      ticketUserInfo\n      ownerUploadImages\n      employeeUploadImages\n      empClosedComment\n      ticketType\n      ticketFilter\n      execptedPrice\n      userClosedComment\n      tip\n      materialsCostPrice\n      materialsCostComments\n    }\n  }\n"]);return Va=function(){return e},e}function Ka(){var e=Object(W.a)(["\n  subscription OnCreateMessage($messageConversationId: ID!) {\n    onCreateMessage(messageConversationId: $messageConversationId) {\n      id\n      content\n      createdAt\n      owner\n      chatbot\n      isSent\n      file\n      messageConversationId\n      conversation {\n        id\n        name\n        createdAt\n      }\n    }\n  }\n"]);return Ka=function(){return e},e}var Za=H()(Ka()),Xa=H()(Va()),Qa=H()(Ga()),en=H()(Ha()),tn=(H()(za()),function(e,t){return(t.execptedPrice?JSON.parse(t.execptedPrice):[]).filter((function(t){return t.serviceProvider===e})).length>0}),an=function(e,t){var a=(t.execptedPrice?JSON.parse(t.execptedPrice):[]).filter((function(t){return t.serviceProvider===e}));return a.length>0?a[0]:void 0},nn=a(845),rn=a(915),on=a(913),cn=a(98),sn=a(914),ln=a(940),un=a(932),pn=a(113),dn=a(937),mn={.5:"Useless",1:"Useless+",1.5:"Poor",2:"Poor+",2.5:"Ok",3:"Ok+",3.5:"Good",4:"Good+",4.5:"Excellent",5:"Excellent+"},fn=Object(j.a)((function(e){return{description:{"& div":{minHeight:"50px !important",alignItems:"start !important"}},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:mt.a[500],position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},buttonSuccess:{backgroundColor:mt.a[500],"&:hover":{backgroundColor:mt.a[700]}}}})),hn=function(e){var t=e.openPop,a=e.type,n=e.closeAlert,i=e.inputmaterialsCostComments,o=e.inputmaterialsCostPrice,c=r.a.useRef(),s=fn(),l=r.a.useState(!1),u=Object(p.a)(l,2),d=u[0],m=u[1],f=r.a.useState(!1),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Object(rt.a)(Object(aa.a)({},s.buttonSuccess,d));r.a.useEffect((function(){return function(){clearTimeout(c.current)}}),[]);var y=r.a.useState(!0),w=Object(p.a)(y,2),j=w[0],O=w[1],C=r.a.useState({comments:"",review:"",rating:"",tip:"",materialsCostPrice:"",materialsCostComments:""}),k=Object(p.a)(C,2),x=k[0],S=k[1],T=r.a.useState([]),R=Object(p.a)(T,2),P=R[0],U=R[1],_=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=r.a.useState(!0),A=Object(p.a)(q,2),D=A[0],$=A[1],B=r.a.useState(!1),L=Object(p.a)(B,2),Y=L[0],F=L[1],J=r.a.useState(!1),M=Object(p.a)(J,2),W=M[0],z=M[1],H=function(e){F(!0),e?($(!0),b||(m(!1),g(!0),c.current=setTimeout((function(){m(!0),g(!1)}),500))):$(!1)};r.a.useEffect((function(){var e=x.comments,t=x.review,n=x.rating,r=x.materialsCostPrice,i=x.materialsCostComments,c=!0;!1===(c="completed"===a||"Added Review"===a?!(e&&t&&n):!e)&&W&&(c=!(r&&i)),!1===c&&o&&(c=!D||!Y),O(c)}),[x,a,W,D,o,Y]);var G=function(){var e=Object(I.a)(N.a.mark((function e(){var t,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.tip){e.next=13;break}if(t={comments:x.comments,review:x.review,rating:x.rating},!(P&&P.length>0)){e.next=9;break}if(a=[],!(P.length>0)){e.next=8;break}return e.next=7,Object(pn.c)(P);case 7:a=e.sent;case 8:t.employeeUploadImages=JSON.stringify(a);case 9:W&&(t.materialsCostPrice=x.materialsCostPrice,t.materialsCostComments=x.materialsCostComments),n(!0,t),e.next=14;break;case 13:n(!0,{comments:x.comments,review:x.review,rating:x.rating,tip:x.tip});case 14:case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){var t=e.target,a=t.name,n=t.value;if("tip"===a||"materialsCostPrice"===a){var r=/^\d{1,8}(?:\.\d{1,4})?$/.test(n);(""===e.target.value||n.endsWith(".")||r)&&S(Object(ca.a)({},x,Object(aa.a)({},a,n)))}else S(Object(ca.a)({},x,Object(aa.a)({},a,n)))},K=function(){n(!1,"")},Z=r.a.useState(0),X=Object(p.a)(Z,2),Q=X[0],ee=X[1],te=r.a.useState(0),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1];return r.a.createElement("div",null,r.a.createElement(nn.a,{open:t,keepMounted:!0,fullWidth:!0,maxWidth:"lg",onClose:K,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},"unassign"===a||"closed"===a?r.a.createElement("div",null,r.a.createElement(cn.a,{id:"alert-dialog-slide-title",onClose:K},"Cancel Job?"),r.a.createElement(on.a,null,r.a.createElement(sn.a,{id:"alert-dialog-slide-description"},"unassign"===a?"Do you want to cancel an in-progress service request?":"Are you sure you want to cancel the job?"," ",r.a.createElement("br",null),"Reason for Canceling"),r.a.createElement(Lt.a,{multiline:!0,required:!0,className:s.description,id:"comments",autoFocus:!0,name:"comments",label:"Cancellation Comments",fullWidth:!0,value:x.comments,onChange:V,autoComplete:"content"})),r.a.createElement(rn.a,null,r.a.createElement(kt.a,{variant:"contained",disabled:j,onClick:G,color:"secondary"},"unassign"===a?"Unassign Ticket":"Cancel Job"))," "):r.a.createElement("div",null,r.a.createElement(cn.a,{id:"alert-dialog-slide-title",onClose:K},"Feedback, Rating and Review"),r.a.createElement(on.a,null,r.a.createElement(sn.a,{id:"alert-dialog-slide-description"},"Private Review to Travtail."),r.a.createElement(Lt.a,{multiline:!0,className:s.description,required:!0,id:"comments",name:"comments",label:"Private Review Comments",fullWidth:!0,value:x.comments,onChange:V,autoComplete:"content"}),r.a.createElement("span",null,"Added Review"===a?r.a.createElement("span",null,r.a.createElement(E.a,{style:{color:"#3f51b5",fontWeight:900,marginTop:20},variant:"subtitle1"}," Tip"),r.a.createElement(Lt.a,{fullWidth:!0,id:"tip",name:"tip",placeholder:"Tip",value:x.tip,onChange:V,InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}})):null,"Added Review"===a&&o&&i?r.a.createElement("span",null,r.a.createElement(E.a,{style:{color:"#3f51b5",fontWeight:900,marginTop:20},variant:"subtitle1"}," Materials Cost"),r.a.createElement(Lt.a,{fullWidth:!0,disabled:!0,id:"materialsCostPrice",name:"materialsCostPrice",label:"Materials Cost Price",placeholder:"materialsCostPrice",value:o,InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}}),r.a.createElement(Lt.a,{fullWidth:!0,disabled:!0,id:"materialsCostComments",name:"materialsCostComments",label:"Materials Cost Comments",placeholder:"materialsCostComments",value:i}),r.a.createElement(rn.a,{style:{padding:0}},r.a.createElement(kt.a,{onClick:function(){return H(!1)},variant:"contained",color:"secondary"},"Disagree"),r.a.createElement("div",{className:s.wrapper},r.a.createElement(kt.a,{variant:"contained",color:"primary",className:v,disabled:b,onClick:function(){return H(!0)}},"Accept"),b&&r.a.createElement(Na.a,{size:24,className:s.buttonProgress}))),!1===D&&Y?r.a.createElement(E.a,{color:"secondary",variant:"subtitle2",gutterBottom:!0},"If you see Issue with Materials Cost email us via contact@travtail.com"):null):null,"completed"===a?r.a.createElement("span",null,r.a.createElement(E.a,{style:{color:"#3f51b5",fontWeight:900,marginTop:20},variant:"subtitle1"}," Materials Cost"),r.a.createElement(Wt.a,{control:r.a.createElement(Xe.a,{title:"Delete"},r.a.createElement(dn.a,{checked:W,onChange:function(e){var t=e.target,a=t.name,n=t.checked;"materialsCost"===a&&z(!!n)},name:"materialsCost",color:"primary"})),label:"I bought some materials and have a receipt"}),W?r.a.createElement("span",null,r.a.createElement(Lt.a,{fullWidth:!0,id:"materialsCostPrice",name:"materialsCostPrice",label:"Materials Cost Amount",placeholder:"Materials Cost Amount",value:x.materialsCostPrice,onChange:V,InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}}),r.a.createElement(Lt.a,{multiline:!0,required:!0,className:s.description,id:"materialsCostComments",name:"materialsCostComments",label:"Materials Cost Comments",fullWidth:!0,value:x.materialsCostComments,onChange:V,autoComplete:"Materials Cost Comments"})):null):null,r.a.createElement(E.a,{style:{color:"#3f51b5",fontWeight:900,marginTop:20},variant:"subtitle1"},"completed"===a?"Service Provider":"Customer"," Rating and Review"),r.a.createElement(un.a,{style:{padding:0,marginTop:10},component:"fieldset",mb:3,borderColor:"transparent"},r.a.createElement(E.a,{component:"legend"},"Rating"),r.a.createElement(ln.a,{name:"hover-feedback",value:Q,precision:.5,onChange:function(e,t){ee(null!==t&&void 0!==t?t:0),S(Object(ca.a)({},x,Object(aa.a)({},"rating",String(t))))},onChangeActive:function(e,t){re(t)}}),null!==Q&&r.a.createElement(un.a,{ml:2},mn[-1!==ne?ne:Q]),r.a.createElement(Lt.a,{multiline:!0,className:s.description,required:!0,autoFocus:!0,id:"content",name:"review",label:"Review",fullWidth:!0,value:x.review,onChange:V,autoComplete:"content"}),"completed"===a?r.a.createElement(ma.a,{withPreview:!0,withIcon:!0,onChange:_,imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:15242880}):null))),r.a.createElement(rn.a,null,r.a.createElement(kt.a,{variant:"contained",disabled:j,onClick:G,color:"primary"},"completed"===a?"Completed":"Added Review"))," ")))},bn=a(132),gn=a(944),vn=a(222),yn=a.n(vn),En=a(311),wn=a.n(En),jn=a(139),On=a.n(jn),Cn=(a(195),a(9)),kn=Object(Cn.a)((function(e){return Object(O.a)({root:{margin:0,color:"#fff"},list:{paddingLeft:0,paddingRight:0},title:{color:"#fff",backgroundColor:"#3f51b5"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},subHeader:{fontSize:"1rem",fontWeight:900,paddingLeft:0,paddingRight:0,color:"#3f51b5"},inline:{display:"inline"}})}))((function(e){var t=e.classes,a=e.rating,n=e.reviews,i=e.name;Object(l.a)(e,["classes","rating","reviews","name"]);return r.a.createElement(d.a,{container:!0,direction:"column"},r.a.createElement(un.a,{style:{color:"#3f51b5",fontWeight:900,padding:0,marginLeft:0,marginTop:20},component:"fieldset",mb:3,borderColor:"transparent"},r.a.createElement(E.a,{style:{color:"#3f51b5",fontWeight:900,padding:0,marginLeft:0,marginTop:20},component:"legend"},i,"'s  Rating"),r.a.createElement(ln.a,{name:"read-only",value:a,readOnly:!0})),r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},i,"'s Reviews"),className:t.root},n.length>0?n.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{className:t.list,key:e.id,alignItems:"flex-start"},r.a.createElement(Ma.a,{primary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("b",null,e.review))),secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("b",null,"Time")," : ",new Date(e.createdAt).toLocaleString()," ",r.a.createElement("br",null)))})),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("b",null,"No Review Yet!!")))))})),xn=a(170),Sn=a.n(xn),Tn=Object(j.a)((function(e){return Object(O.a)({container:{padding:15}})})),Nn=function(e){var t=e.employee,a=e.phoneNumberShow,n=e.openPop,i=e.closeAlert,o=r.a.useState("paper"),c=Object(p.a)(o,2),l=c[0],u=c[1],m=r.a.useContext(s.a),f=r.a.useState([]),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Tn(),y=r.a.useState(),E=Object(p.a)(y,2),w=E[0],j=E[1];r.a.useEffect((function(){var e=function(){var e=Object(I.a)(N.a.mark((function e(){var n,r,i,o,c,s,l;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(se,{id:t}));case 2:if(!(n=e.sent).data.getUser){e.next=16;break}if(r=n.data.getUser,i=JSON.parse(r.address),j({id:r.id,avatar:"",address:"",aboutme:i.aboutme,phoneNumber:i.phoneNumber,username:a?"".concat(i.firstName," ").concat(i.lastName):"".concat(i.firstName),usertype:r.usertype}),!i.pictures){e.next=13;break}return o=JSON.parse(i.pictures),e.next=11,Object(fa.getImages)(o);case 11:c=e.sent,g(c);case 13:r.rating&&(s=JSON.parse(r.rating),P(parseFloat(s.rating))),l=r.reviews.items,x(l);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();m.userId&&e()}),[m.userId]);var O=r.a.useState([]),C=Object(p.a)(O,2),k=C[0],x=C[1],S=r.a.useState(0),T=Object(p.a)(S,2),R=T[0],P=T[1];r.a.useEffect((function(){n&&u("paper")}),[n]);var U=function(){i(!1)},_=r.a.useRef(null);return r.a.useEffect((function(){if(n){var e=_.current;null!==e&&e.focus()}}),[n]),w?r.a.createElement(nn.a,{open:n,onClose:U,scroll:l,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(fa.DialogTitle,{id:"scroll-dialog-title",onClose:U},"Employee"===w.usertype?"Service Provider Details":"Customer Details"),r.a.createElement("div",{className:v.container},r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"username",name:"username",label:"UserName",fullWidth:!0,defaultValue:w.username,autoComplete:"username"})),a?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"phoneNumber",name:"phoneNumber",label:"Phone Number",fullWidth:!0,defaultValue:w.phoneNumber,autoComplete:"phoneNumber"})):null,r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{disabled:!0,required:!0,multiline:!0,fullWidth:!0,id:"aboutme",name:"aboutme",label:"About Me",placeholder:"About Me",defaultValue:w.aboutme,autoComplete:"aboutme"}))),r.a.createElement(d.a,{item:!0,xs:12,style:{width:"250px",height:"250px"}},b&&b.length>0?r.a.createElement(Sn.a,{imageStyle:{width:"250px",height:"250px"},style:{width:"250px",height:"250px"},src:b[0]}):null),r.a.createElement(kn,{rating:R,name:w.username,reviews:k}))):null},In=a(312),Rn=a.n(In),Pn=a(84),Un=Object(j.a)((function(e){return Object(O.a)({container:{padding:15}})})),_n=function(e){var t=e.execptedPrice,a=e.user,n=e.openPop,i=e.id,o=e.closeAlert,c=r.a.useState("paper"),s=Object(p.a)(c,2),l=s[0],u=s[1],m=Un(),f=r.a.useState(""),h=Object(p.a)(f,2),b=h[0],g=h[1],v=r.a.useState(""),y=Object(p.a)(v,2),E=y[0],w=y[1];r.a.useEffect((function(){var e=(t?JSON.parse(t):[]).filter((function(e){return e.serviceProvider===i}));g(e.length>0?e[0].price:""),console.log("execptedPrice",t)}),[t,i]),r.a.useEffect((function(){n&&u("paper")}),[n]);var j=function(){if(console.log("handleClose",E),E.length>0){var e=[];if(b.length>0){var n=JSON.parse(t);n.forEach((function(e,t){e.serviceProvider===i&&(n[t].price=E)})),console.log("bidExperts",n),o(!0,JSON.stringify(n),!1)}else{var r=JSON.parse(a.address);if(t&&t.length>1){var c=JSON.parse(t);c.push({serviceProvider:i,price:E,username:null===a||void 0===a?void 0:a.username,email:r.email,phoneNumber:r.phoneNumber}),console.log("bidExperts",c),o(!0,JSON.stringify(c),!0)}else e.push({serviceProvider:i,price:E,username:null===a||void 0===a?void 0:a.username,email:r.email,phoneNumber:r.phoneNumber}),console.log("bidExperts",e),o(!0,JSON.stringify(e),!0)}}else o(!1,"",!1)},O=r.a.useRef(null);return r.a.useEffect((function(){if(n){var e=O.current;null!==e&&e.focus()}}),[n]),r.a.createElement(nn.a,{open:n,onClose:j,scroll:l,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(fa.DialogTitle,{id:"scroll-dialog-title",onClose:j},"Service Provider Details"),r.a.createElement("div",{className:m.container},r.a.createElement(d.a,{container:!0,spacing:1},b&&b.length>0?r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"price",name:"price",label:"old price",fullWidth:!0,defaultValue:b,autoComplete:"old price",InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}})):null,r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{required:!0,id:"newprice",name:"newprice",label:b&&b.length>0?"Latest price":"Enter your Bid amount",fullWidth:!0,value:E,onChange:function(e){var t=e.target.value,a=/^\d{1,8}(?:\.\d{1,4})?$/.test(t);(""===e.target.value||t.endsWith(".")||a)&&w(t)},autoComplete:"Bid Amount",InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}})))),r.a.createElement(rn.a,null,r.a.createElement(kt.a,{onClick:function(){o(!1,"",!1)},variant:"contained",color:"secondary"},"Cancel"),r.a.createElement(kt.a,{onClick:j,variant:"contained",color:"primary",autoFocus:!0},"Bid")))},qn=a(918),An=a(101),Dn=a(100),$n=a(82),Bn=Object(j.a)((function(e){return Object(O.a)({root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"},subHeader:{color:"rgba(0, 0, 0, 0.98)",fontSize:18,fontWeight:900},button:{width:20,marginTop:15,padding:5,margin:e.spacing(1)},rating:{marginLeft:15},buttonCart:{marginLeft:5,marginTop:15,width:10},buttonGird:{width:90},date:{display:"block",boxShadow:"rgba(50, 50, 93, 0.14902) 0px 1px 3px,rgba(0, 0, 0, 0.0196078) 0px 1px 0px",margin:"10px 0 5px 0",padding:"10px 14px",fontFamily:"Roboto,sans-serif",fontWeight:400,fontSize:16,lineHeight:1.43},cartLabel:{width:10,marginBottom:8,marginLeft:5},biditemslist:{paddingLeft:1,paddingRight:1},biditemsIcon:{minWidth:1,marginRight:8,marginTop:4},backdrop:{position:"absolute",zIndex:2e3,top:0,left:0,bottom:0,right:0,color:"#fff"}})})),Ln=function(e){var t=e.data,a=e.user,n=e.openPop,i=e.close,o=e.setIsEmployee,c=r.a.useState("paper"),l=Object(p.a)(c,2),m=l[0],f=l[1],h=r.a.useContext(s.a),b=r.a.useState(!0),g=Object(p.a)(b,2),v=g[0],y=g[1],E=Object(u.g)(),w=Bn();r.a.useEffect((function(){n&&f("paper")}),[n]);var j=function(e){var t=e.target,a=t.name,n=t.value;q(Object(ca.a)({},_,Object(aa.a)({},a,n)))};r.a.useEffect((function(){if(t.id&&(q(t),t.execptedPrice)){var e=JSON.parse(t.execptedPrice).sort((function(e,t){return e.price>t.price?1:-1}));x(e)}R(t.empClosedComment)}),[t]);var O=r.a.useState([]),C=Object(p.a)(O,2),k=C[0],x=C[1],S=r.a.useState(""),T=Object(p.a)(S,2),R=(T[0],T[1]),P=r.a.useState({content:"",price:"",title:"",ticketType:"",source:"",destination:"",time:"",county:"",category:"",tip:"",materialsCostPrice:"",materialsCostComments:""}),U=Object(p.a)(P,2),_=U[0],q=U[1],A=r.a.useState(""),D=Object(p.a)(A,2),$=D[0],B=D[1],L=r.a.useCallback((function(e){B(e)}),[]),F=r.a.useState(""),J=Object(p.a)(F,2),W=J[0],z=J[1];r.a.useEffect((function(){h&&h.userId&&function(){var e=Object(I.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=an(h.userId,t))&&z(a.price);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[h.userId]);var H=function(){var e=Object(I.a)(N.a.mark((function e(){var a,n,r,c,s,l,u,p;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.userId,!o){e.next=16;break}return n=h.user.attributes.phone_number,r=h.user.attributes.email,e.next=6,M.a.graphql(Object(M.i)(Pe,{input:{id:Object(Pn.uuid)(),ticketID:t.id,userID:a}}));case 6:return c=e.sent,s=JSON.stringify({email:r,phoneNumber:n,userticketid:c.data.createUserTicket.id}),e.next=10,M.a.graphql(Object(M.i)(Ae,{id:t.id,ticketEmployeeId:a,ticketEmployeeInfo:s,time:t.time,ticketFilter:t.ticketFilter}));case 10:l=e.sent,console.log("accept ticket by employee",l),i(!0,Object(ca.a)({},t,{status:"assinged",ticketEmployeeId:a}),"assinged"),M.b.record({name:"serviceProviderAccepted",attributes:{ticketID:t.id,ticketEmployeeId:a}}),e.next=30;break;case 16:if(!v){e.next=20;break}y(!1),e.next=30;break;case 20:if(0!=v){e.next=30;break}if(!(t.price>_.price&&(t.execptedPrice||"open"!==t.status||t.ticketEmployeeId))){e.next=24;break}return B("you can't lowering the price after the service request is accepted or a bid"),e.abrupt("return");case 24:return e.next=26,M.a.graphql(Object(M.i)(qe,{input:{id:t.id,price:_.price,time:_.time,title:_.title,content:_.content,county:_.county,destination:null!==(u=_.destination)&&void 0!==u?u:"sfsfsf",source:null!==(p=_.source)&&void 0!==p?p:"sfsfsf",ticketFilter:t.ticketFilter}}));case 26:e.sent,console.log("update ticke4t info",Object(ca.a)({},t,{},_)),i(!0,Object(ca.a)({},t,{},_),"ticketupdated"),M.b.record({name:"customerUpdatedTicket",attributes:{ticketID:t.id,price:_.price}});case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(I.a)(N.a.mark((function e(a){var n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(Pe,{input:{id:Object(Pn.uuid)(),ticketID:t.id,userID:a.serviceProvider}}));case 2:return n=e.sent,a.userticketid=n.data.createUserTicket.id,e.next=6,M.a.graphql(Object(M.i)(Ae,{id:t.id,price:a.price,ticketEmployeeId:a.serviceProvider,ticketEmployeeInfo:JSON.stringify(a),time:t.time,ticketFilter:t.ticketFilter}));case 6:r=e.sent,console.log("accept ticket by user",r),i(!0,Object(ca.a)({},t,{status:"assinged",ticketEmployeeId:a.serviceProvider}),"assinged"),M.b.record({name:"acceptBid",attributes:{ticketID:t.id,price:a.price,ticketEmployeeId:a.serviceProvider}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){i(!1,t,"")},K=r.a.useRef(null);r.a.useEffect((function(){if(n){var e=K.current;null!==e&&e.focus()}}),[n]);var Z=r.a.useState(!1),X=Object(p.a)(Z,2),Q=X[0],ee=X[1],te=r.a.useState(""),ae=Object(p.a)(te,2),ne=ae[0],re=ae[1],ie=r.a.useState(!1),oe=Object(p.a)(ie,2),ce=oe[0],se=oe[1],le=function(){var e=Object(I.a)(N.a.mark((function e(a,n){var r,o,c,s,l,u,p,d,m,f,b,g,v,y;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se(!0),ee(!1),!0!==a){e.next=52;break}if("unassign"!==ne){e.next=22;break}if(!t.ticketEmployeeId||!t.ticketEmployeeInfo){e.next=11;break}if(r=JSON.parse(t.ticketEmployeeInfo),console.log("unassign,",r),!r.userticketid){e.next=11;break}return console.log("unassign,",r.userticketid),e.next=11,M.a.graphql(Object(M.i)(Je,{id:r.userticketid}));case 11:return o={id:t.id,status:"open",ticketEmployeeId:null,ticketEmployeeInfo:null,time:t.time,ticketFilter:t.ticketFilter},c="","Bid"===t.ticketType&&t.execptedPrice&&(s=JSON.parse(t.execptedPrice),l=s.filter((function(e){return e.serviceProvider!==h.userId})),c=JSON.stringify(l),o.execptedPrice=c),e.next=16,M.a.graphql(Object(M.i)(qe,{input:o}));case 16:u=e.sent,console.log("unassign close",u),i(!0,Object(ca.a)({},t,{},_,{status:"open",ticketEmployeeId:"",ticketEmployeeInfo:"",execptedPrice:c}),"unassign"),M.b.record({name:"unassign",attributes:{ticketID:t.id}}),e.next=50;break;case 22:return p={id:t.id,status:ne,time:t.time,ticketFilter:t.ticketFilter},"Added Review"===ne?p={id:t.id,userClosedComment:null===n||void 0===n?void 0:n.comments,userClosedTime:(new Date).toUTCString(),time:t.time,ticketFilter:t.ticketFilter,tip:null===n||void 0===n?void 0:n.tip}:"completed"===ne&&(p=Object(ca.a)({},p,{empClosedComment:null===n||void 0===n?void 0:n.comments,empClosedTime:(new Date).toUTCString(),employeeUploadImages:null===n||void 0===n?void 0:n.employeeUploadImages,materialsCostPrice:null===n||void 0===n?void 0:n.materialsCostPrice,materialsCostComments:null===n||void 0===n?void 0:n.materialsCostComments})),e.next=26,M.a.graphql(Object(M.i)(qe,{input:p}));case 26:if(e.sent,"completed"!==ne&&"Added Review"!==ne){e.next=48;break}if("completed"!==ne){e.next=33;break}return e.next=31,_a(t.ticketUserId,t.price);case 31:d=e.sent,console.log("payment completed",d);case 33:if(!("Added Review"===ne&&(null===n||void 0===n?void 0:n.tip)&&(null===n||void 0===n?void 0:n.tip.length)>0)){e.next=41;break}return m=(null===n||void 0===n?void 0:n.tip)?parseFloat(null===n||void 0===n?void 0:n.tip):0,f=t.materialsCostPrice?parseFloat(t.materialsCostPrice):0,b=m+f,e.next=39,_a(t.ticketUserId,b.toString());case 39:g=e.sent,console.log("tip payment completed",g);case 41:v="completed"===ne?t.ticketUserId:t.ticketEmployeeId,Ge(v,null===n||void 0===n?void 0:n.rating),y={id:Object(Pn.uuid)(),userId:v,review:null===n||void 0===n?void 0:n.review,ticketId:t.id,createdAt:(new Date).toUTCString()},M.a.graphql(Object(M.i)(Me,{input:y})),i(!0,Object(ca.a)({},t,{},_,{status:"completed",empClosedComment:null===n||void 0===n?void 0:n.comments,tip:null===n||void 0===n?void 0:n.tip,materialsCostPrice:null===n||void 0===n?void 0:n.materialsCostPrice,materialsCostComments:null===n||void 0===n?void 0:n.materialsCostComments,employeeUploadImages:null===n||void 0===n?void 0:n.employeeUploadImages}),ne),e.next=49;break;case 48:i(!0,Object(ca.a)({},t,{},_,{status:ne}),ne);case 49:M.b.record({name:"closedJob"===ne?"closedJob":"completedJob",attributes:{ticketID:t.id,status:ne}});case 50:e.next=53;break;case 52:ee(!1);case 53:se(!1);case 54:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=r.a.useState(!1),pe=Object(p.a)(ue,2),de=pe[0],me=pe[1],fe=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:me(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=r.a.useState(!1),be=Object(p.a)(he,2),ge=be[0],ve=be[1],ye=function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ee=r.a.useState(!1),we=Object(p.a)(Ee,2),je=we[0],Oe=we[1],Ce=r.a.useState(""),ke=Object(p.a)(Ce,2),xe=ke[0],Se=ke[1],Te=function(){var e=Object(I.a)(N.a.mark((function e(){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.userId,n=a===t.ticketUserId?t.ticketEmployeeId:t.ticketUserId,e.next=4,He(a,n,o);case 4:r=e.sent,console.log("conv",r),E.push({pathname:"/chat",state:{conversation:r,user:a}});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=r.a.useState(!1),Ie=Object(p.a)(Ne,2),Re=Ie[0],Ue=Ie[1],_e=function(){Ue(!0)},De=function(){var e=Object(I.a)(N.a.mark((function e(a,n,r){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ue(!1),!0!==a){e.next=7;break}return console.log("execptedPrice",n),e.next=5,M.a.graphql(Object(M.i)(qe,{input:{id:t.id,execptedPrice:n,time:t.time,ticketFilter:t.ticketFilter}}));case 5:M.b.record({name:r?"newBid":"updatedBid",attributes:{ticketID:t.id,userID:h.userId}}),i(!0,Object(ca.a)({},t,{execptedPrice:n,status:"open"}),"bidadded");case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(nn.a,{open:n,fullScreen:!0,onClose:V,scroll:m,"aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description"},r.a.createElement(cn.a,{id:"scroll-dialog-title",onClose:V},"Job Details"),r.a.createElement(on.a,{dividers:"paper"===m},r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:v,required:!0,id:"title",name:"title",label:"Title",fullWidth:!0,onChange:j,value:_.title,autoComplete:"title"})),r.a.createElement(d.a,{item:!0,xs:6,sm:6},r.a.createElement(Lt.a,{disabled:v,required:!0,id:"ticketType",name:"ticketType",label:"JobType",fullWidth:!0,value:_.ticketType,autoComplete:"price"})),r.a.createElement(d.a,{item:!0,xs:6,sm:6},r.a.createElement(Lt.a,{disabled:v,required:!0,id:"price",name:"price",label:"Price",fullWidth:!0,onChange:j,value:_.price,autoComplete:"price"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"category",name:"category",label:"Category",fullWidth:!0,onChange:j,value:_.category,autoComplete:"category"})),r.a.createElement(d.a,{item:!0,xs:12,sm:6},0==v?r.a.createElement(ua,{input:t.source,label:"Source",googleAddressReturn:function(e){var t=pa(e);q(Object(ca.a)({},_,{source:t.formatted_address}))}}):r.a.createElement("span",null,r.a.createElement(Lt.a,{label:"Source",name:"source",fullWidth:!0,disabled:!0,defaultValue:t.source}),r.a.createElement("a",{target:"_blank",href:"http://maps.google.com/?daddr=".concat(t.source)},"Get Directions "))),t.source.localeCompare(t.destination)?r.a.createElement(d.a,{item:!0,xs:12,sm:6},0==v?r.a.createElement(ua,{input:t.destination,label:"Destination",googleAddressReturn:function(e){var t=pa(e);q(Object(ca.a)({},_,{destination:t.formatted_address,county:t.county}))}}):r.a.createElement("span",null,r.a.createElement(Lt.a,{label:"Destination",name:"destination",fullWidth:!0,disabled:!0,defaultValue:t.destination}),r.a.createElement("a",{target:"_blank",href:"http://maps.google.com/?daddr=".concat(t.destination)},"Get Directions "))):null,0==v?r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("label",null,"Time:"),r.a.createElement(Ea.a,{selected:Date.parse(_.time),onChange:function(e){console.log("handleTimeChange",e),q(Object(ca.a)({},_,Object(aa.a)({},"time",e)))},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",minTime:Object(An.default)(Object(Dn.default)(new Date,0),7),maxTime:Object(An.default)(Object(Dn.default)(new Date,30),22),minDate:new Date,maxDate:Object($n.default)(new Date,30),placeholderText:"Click to select a date",dateFormat:"MMMM d, yyyy h:mm aa",className:w.date,popperClassName:"some-custom-class",popperPlacement:"top-end",popperModifiers:{offset:{enabled:!0,offset:"5px, 10px"},preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})):r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{label:"Time",name:"time",fullWidth:!0,disabled:!0,defaultValue:new Date(_.time).toLocaleString()})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{disabled:v,multiline:!0,required:!0,id:"content",name:"content",label:"Content",fullWidth:!0,onChange:j,value:_.content,autoComplete:"content"})),W&&o?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"bidAmount",name:"bidAmount",label:"Bid Amount",fullWidth:!0,value:W,autoComplete:"Enter Bid Amount"})):null,_.tip?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"tip",name:"tip",label:"Tip Amount",fullWidth:!0,value:_.tip})):null,_.materialsCostPrice?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"materialsCostPrice",name:"materialsCostPrice",label:"Materials Cost Amount",fullWidth:!0,value:_.materialsCostPrice})):null,_.materialsCostComments?r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{disabled:!0,required:!0,id:"materialsCostComments",name:"materialsCostComments",label:"Materials Cost Comments",fullWidth:!0,value:_.materialsCostComments})):null,r.a.createElement(d.a,{item:!0,xs:12,container:!0,direction:"row"},o||t.ticketEmployeeId?r.a.createElement(gn.a,{icon:r.a.createElement(yn.a,null),style:{margin:"5px 0"},label:o?"Customer Details":"Expert Info",clickable:!0,color:"primary",onClick:function(){Se(o?t.ticketUserId:t.ticketEmployeeId),Oe(!0)},deleteIcon:r.a.createElement(wn.a,null)}):null,o||t.ticketEmployeeId?r.a.createElement("div",null,r.a.createElement(gn.a,{icon:r.a.createElement(yn.a,null),style:{margin:"5px 0"},label:"Start Chat",clickable:!0,color:"primary",onClick:Te,deleteIcon:r.a.createElement(Rn.a,null)})):null,t.ownerUploadImages&&JSON.parse(t.ownerUploadImages).length>0?r.a.createElement(gn.a,{style:{margin:"5px 0"},label:"See Attachments",clickable:!0,color:"primary",onClick:fe,deleteIcon:r.a.createElement(On.a,null)}):null,",",t.employeeUploadImages&&JSON.parse(t.employeeUploadImages).length>0?r.a.createElement(gn.a,{style:{margin:"5px 0"},label:"See Proof of Completion Documents",clickable:!0,color:"primary",onClick:ye,deleteIcon:r.a.createElement(On.a,null)}):null),"open"==t.status&&0==o&&"Bid"===t.ticketType?r.a.createElement(Fa.a,{className:w.root,component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:w.subHeader,component:"div",id:"nested-list-subheader"},"Bids")},k.length>0?k.map((function(e){return r.a.createElement("div",{key:e.serviceProvider},r.a.createElement(Ja.a,{className:w.biditemslist,key:e.serviceProvider,alignItems:"flex-start"},r.a.createElement(qn.a,{className:w.biditemsIcon,onClick:function(t){return a=e.serviceProvider,Se(a),void Oe(!0);var a}},r.a.createElement(Y.a,null)),r.a.createElement(Ma.a,{primary:"Name: ".concat(e.username,",  Price: ").concat(e.price," ")}),r.a.createElement(d.a,{className:w.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(kt.a,{size:"small",color:"primary",variant:"contained",onClick:function(){return G(e)}},"Accept"))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Bids")):null,r.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"}))),"closed"===t.status||"completed"===t.status?r.a.createElement(rn.a,null,!1!==o||t.userClosedComment?null:r.a.createElement(kt.a,{variant:"contained",color:"primary",onClick:function(){re("Added Review"),ee(!0)}},"Add Review / Tip"),"  "):r.a.createElement(rn.a,null,!1===o?r.a.createElement(kt.a,{variant:"contained",onClick:function(){re("closed"),ee(!0)}},"Cancel Job"):null,o&&"assinged"===t.status?r.a.createElement(kt.a,{variant:"contained",onClick:function(){re("unassign"),ee(!0)},color:"secondary"},"Unassign"):null,o&&"assinged"===t.status?r.a.createElement(kt.a,{variant:"contained",onClick:function(){re("completed"),ee(!0)},color:"primary"},"Complete Job"):null,"open"===t.status&&!0===o&&"Bid"===t.ticketType?r.a.createElement(kt.a,{onClick:function(e){_e()},variant:"contained",color:"primary"},"Bid"):null,"open"===t.status&&1==o&&"Bid"!==t.ticketType?r.a.createElement(kt.a,{onClick:H,variant:"contained",color:"primary"},"Accept"):null,"open"===t.status&&!1===o?r.a.createElement(kt.a,{onClick:H,variant:"contained",color:"primary"},0==v?"Update":"Edit"):null,"assinged"===t.status&&!1===o?r.a.createElement(kt.a,{onClick:H,variant:"contained",color:"primary"},"Edit"):null),r.a.createElement(Ta.a,{className:w.backdrop,open:ce},r.a.createElement(Na.a,{color:"inherit"}))),Q?r.a.createElement(hn,{type:ne,openPop:Q,closeAlert:le,inputmaterialsCostPrice:_.materialsCostPrice,inputmaterialsCostComments:_.materialsCostComments}):null,de?r.a.createElement(bn.a,{inputimages:t.ownerUploadImages,openPop:de,closeAlert:function(e){me(!1)}}):null,ge?r.a.createElement(bn.a,{inputimages:t.employeeUploadImages,openPop:ge,closeAlert:function(e){ve(!1)}}):null,je?r.a.createElement(Nn,{phoneNumberShow:"open"!=t.status,employee:xe,openPop:je,closeAlert:function(e){Oe(!1)}}):null,Re?r.a.createElement(_n,{user:a,id:h.userId,execptedPrice:t.execptedPrice,openPop:Re,closeAlert:De}):null,r.a.createElement(Ct,{variant:"error",message:$,setMessage:function(e){return L(e)}}))},Yn=a(920),Fn=a(313),Jn=a.n(Fn),Mn=a(919),Wn=Object(j.a)((function(e){return{root:function(t){return{width:"100%",maxWidth:window.screen.width>700?600:window.screen.width-25,backgroundColor:e.palette.background.paper}},subHeader:{color:"rgba(0, 0, 0, 0.98)",fontSize:18,fontWeight:900,paddingLeft:0,paddingRight:0},inline:{display:"inline"},button:{width:20,marginTop:15,padding:5,margin:e.spacing(1)},rating:{marginLeft:15},paper:Object(aa.a)({padding:e.spacing(2),boxShadow:window.screen.width>700?"":"unset"},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),layout:Object(aa.a)({width:window.screen.width>700?600:window.screen.width-25},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),buttonCart:{marginLeft:5,marginTop:15,width:10},buttonGird:{width:90},list:{paddingLeft:0,paddingRight:0},cartLabel:{fontWeight:900,backgroundColor:"rgba(0, 0, 0, 0.18)",width:50,marginBottom:8,marginTop:8,marginLeft:5,borderRadius:5,paddingLeft:5,color:"black !important"},absolute:{position:"fixed",zIndex:100,bottom:e.spacing(9),right:e.spacing(4)},fab:{margin:e.spacing(2)},chipTop:{marginTop:10}}}));function zn(){var e={width:Object(Mn.a)("(min-width:600px)")?600:window.screen.width-50},t=Wn(e),a=r.a.useContext(s.a),i=r.a.useState([]),o=Object(p.a)(i,2),c=o[0],l=o[1],m=r.a.useState([]),f=Object(p.a)(m,2),h=f[0],b=f[1],g=r.a.useState([]),v=Object(p.a)(g,2),y=v[0],w=v[1],j=r.a.useState([]),O=Object(p.a)(j,2),C=O[0],k=O[1],x=r.a.useState([]),S=Object(p.a)(x,2),T=S[0],R=S[1],P=r.a.useState(!1),U=Object(p.a)(P,2),_=(U[0],U[1]),q=Object(u.g)(),A=function(e){return e.reduce((function(e,t){return e.find((function(e){return e.id===t.id}))?Object(Ya.a)(e):[].concat(Object(Ya.a)(e),[t])}),[])};Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]);var D=function(e){var t=A(JSON.parse(JSON.stringify(e))).sort((function(e,t){return new Date(e.time).getTime()-new Date(t.time).getTime()}));R(t)},$=function(e){var t=A(JSON.parse(JSON.stringify(e))).sort((function(e,t){return e.price>t.price?-1:1}));l(t)},B=function(e){var t=A(JSON.parse(JSON.stringify(e))).sort((function(e,t){return new Date(e.time).getTime()-new Date(t.time).getTime()}));b(t)},L=function(e){var t=A(JSON.parse(JSON.stringify(e))).sort((function(e,t){return new Date(e.time).getTime()-new Date(t.time).getTime()}));k(t)},Y=function(e){var t=A(JSON.parse(JSON.stringify(e))).sort((function(e,t){return new Date(e.time).getTime()-new Date(t.time).getTime()}));w(t)};Object(n.useEffect)((function(){a&&a.userId&&_(!0)}),[a.userId]);var F=function(e){console.log("button click",e),Z(e),H(!0)},J=r.a.useState(!1),W=Object(p.a)(J,2),z=W[0],H=W[1],G=r.a.useState({}),V=Object(p.a)(G,2),K=V[0],Z=V[1],X=r.a.useState(!1),Q=Object(p.a)(X,2),ee=Q[0],te=Q[1],ae=r.a.useReducer((function(e,t){switch(t.type){case"ADDNEWJOB":var n=t.errand;c.push(n);var r=JSON.parse(JSON.stringify(c));return $(r),e;case"EXPERTUPDATE":var i=t.errand;if("open"==i.status)if("Bid"===i.ticketType){console.log("bidJob",C);var o=an(a.userId,i),s=!1;if(o&&C.forEach((function(e,t){e.id===i.id&&(C[t]=i,s=!0)})),s){console.log("updated",C);var l=JSON.parse(JSON.stringify(C));L(l)}else{var u=C.filter((function(e){return e.id!==i.id}));L(u),c.push(i);var p=JSON.parse(JSON.stringify(c));$(p)}}else{console.log("updated",c);var d=!1;c.forEach((function(e,t){e.id===i.id&&(c[t]=i,d=!0)})),!1===d&&c.push(i);var m=JSON.parse(JSON.stringify(c));$(m)}else if("Bid"===i.ticketType){if("completed"==i.status)return e;if(i.ticketEmployeeId===a.userId){u=C.filter((function(e){return e.id!==i.id}));L(u),h.push(i),B(h)}else{u=C.filter((function(e){return e.id!==i.id}));L(u)}if("assinged"==i.status){u=c.filter((function(e){return e.id!==i.id}));$(u)}}else{u=c.filter((function(e){return e.id!==i.id}));$(u)}return e;case"USERUPDATE":var f=t.errand;if("closed"!==f.status&&"completed"!==f.status){for(var b=0;b<h.length;b++)if(h[b].id===f.id&&h[b].status){h[b]=f;var g=JSON.parse(JSON.stringify(h));return B(g),e}}else if("closed"===f.status){u=h.filter((function(e){return e.id!==f.id}));B(JSON.parse(JSON.stringify(u))),y.push(f),Y(JSON.parse(JSON.stringify(y)))}else{console.log("userupdatedcomplete ",f);u=h.filter((function(e){return e.id!==f.id}));if(B(JSON.parse(JSON.stringify(u))),f.userClosedComment){y.push(f),console.log("usercomplete ",u,y),Y(JSON.parse(JSON.stringify(y)));var v=T.filter((function(e){return e.id!==f.id}));D(JSON.parse(JSON.stringify(v)))}else T.push(f),D(JSON.parse(JSON.stringify(T)))}return e;default:return e}}),{errand:""}),ne=Object(p.a)(ae,2),re=(ne[0],ne[1]),ie=r.a.useState(),ce=Object(p.a)(ie,2),se=ce[0],le=ce[1],pe=Object(n.useState)(""),de=Object(p.a)(pe,2),me=de[0],fe=de[1],he=Object(n.useCallback)((function(e){fe(e)}),[]);return Object(n.useEffect)((function(){var e=a.userId;if(e){var t=a.user.attributes["custom:account_type"];!function(){var a=Object(I.a)(N.a.mark((function a(){var n,r,i,o,c,s,l,u,p,d,m,f,h,b,g,v,y,E,w,j;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if("Customer"===t){a.next=29;break}return te(!0),a.next=4,M.a.graphql(Object(M.i)(oe,{id:e}));case 4:if(r=a.sent,console.log("acceptedJobs",r),!r.data.getUser){a.next=11;break}i=r.data.getUser,le(i),a.next=13;break;case 11:return fe("Before you can accept or bid on jobs, you need to create a profile. Click on the profile button at the top right corner of the page to create a profile."),a.abrupt("return");case 13:if(r.data.getUser&&r.data.getUser.tickets.items.length>0&&(o=r.data.getUser.tickets.items,c=o.map((function(e){return e.ticket})),s=c.filter((function(t){return"Bid"!==t.ticketType||("Bid"===t.ticketType&&"open"===t.status||"Bid"===t.ticketType&&("assinged"===t.status||"completed"===t.status)&&t.ticketEmployeeId===e)})),console.log("acceptedJobs",s),l=s.filter((function(e){return"closed"!==e.status&&"completed"!==e.status})),u=s.filter((function(e){return"closed"===e.status||"completed"===e.status})),p=l.filter((function(e){return e.ticketEmployeeId&&"Bid"!==e.ticketType||"Bid"===e.ticketType&&"assinged"===e.status})),d=l.filter((function(e){return"Bid"===e.ticketType&&"open"===e.status})),console.log("bidedfiltered",d),L(d),B(p),console.log("open setCompletedJob  ",u),Y(u)),!(null===(n=i)||void 0===n?void 0:n.active)){a.next=26;break}return m=JSON.parse(i.skills).map((function(e){return e.value})),f=m.map((function(e){var t="".concat(i.county,"_").concat(e);return M.a.graphql(Object(M.i)(Xa,{ticketFilter:t})).subscribe({next:function(e){var t=e.value.data.onCreateTicket;console.log("onCreateTicket",t),re({type:"ADDNEWJOB",errand:t})}}),M.a.graphql(Object(M.i)(Qa,{ticketFilter:t})).subscribe({next:function(e){var t=e.value.data.onUpdatedTicket;console.log("onUpdatedTicket",t),re({type:"EXPERTUPDATE",errand:t})}}),M.a.graphql(Object(M.i)(ue,{status:"open",ticketFilter:t}))})),a.next=19,Promise.all(f);case 19:h=a.sent,console.log("commentData",h),b=null===h||void 0===h?void 0:h.map((function(e){var t,a,n,r;return(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.jobsByStatus)||void 0===a?void 0:a.items.length)>0?null===e||void 0===e||null===(n=e.data)||void 0===n||null===(r=n.jobsByStatus)||void 0===r?void 0:r.items:[]})).reduce((function(e,t){return e.concat(t)}),[]),console.log("commeticketsntData",b),b.length>0&&(p=b.filter((function(t){return"Bid"!==t.ticketType||(!tn(e,t)||(C.push(t),!1))})),L(C),console.log("acceptedJobs",p),$(p)),a.next=27;break;case 26:fe("Your background check is still pending. We will notify you once your background check is complete.");case 27:a.next=35;break;case 29:return a.next=31,M.a.graphql(Object(M.i)(oe,{id:e}));case 31:g=a.sent,console.log("fetchDate",g),g.data.getUser&&(v=g.data.getUser,le(v)),g.data.getUser&&g.data.getUser.tickets.items.length>0&&(y=g.data.getUser.tickets.items,E=y.map((function(e){return e.ticket})),console.log("openErrands",E),l=E.filter((function(e){return"closed"!==e.status&&"completed"!==e.status})),u=E.filter((function(e){return"closed"===e.status||"completed"===e.status})),w=u.filter((function(e){return e.userClosedComment&&e.userClosedComment.length>1})),j=u.filter((function(e){return!(e.userClosedComment&&e.userClosedComment.length>1)})),B(l),D(j),Y(w),M.a.graphql(Object(M.i)(en,{ticketUserId:e})).subscribe({next:function(e){var t=e.value.data.onUpdatedTicketByUser;console.log("onUpdatedTicket",t),re({type:"USERUPDATE",errand:t})}}));case 35:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()()}}),[a.userId]),a&&a.userId?r.a.createElement(Sa,{title:"Ticket List",header:"Home"},r.a.createElement("main",{className:t.layout},r.a.createElement(na.a,{className:t.paper},r.a.createElement(d.a,{container:!0,direction:"column"},ee?r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},"Open Jobs"),className:t.root},c.length>0?c.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{className:t.list,key:e.id,alignItems:"flex-start",onClick:function(){return F(e)}},r.a.createElement(Ma.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("b",null,"Time")," : ",new Date(e.time).toLocaleString()," ",r.a.createElement("br",null),"   ",r.a.createElement("b",null,"Address")," : ",e.source))}),r.a.createElement(d.a,{className:t.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(gn.a,{avatar:r.a.createElement(At.a,null,"$"),size:"small",color:"secondary",label:"".concat(e.price)}),r.a.createElement(gn.a,{size:"small",color:"primary",label:e.status,className:t.chipTop}))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Jobs")):null,r.a.createElement(va.a,null),ee?r.a.createElement("span",null,r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},"Bidded Job"),className:t.root},C.length>0?C.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{key:e.id,className:t.list,alignItems:"flex-start",onClick:function(){return F(e)}},r.a.createElement(Ma.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},"Time : ",new Date(e.time).toLocaleString(),"   ",r.a.createElement("br",null),"   Address : ",e.source))}),r.a.createElement(d.a,{className:t.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(gn.a,{avatar:r.a.createElement(At.a,null,"$"),size:"small",color:"secondary",label:"".concat(e.price)}),r.a.createElement(gn.a,{size:"small",color:"primary",label:e.status,className:t.chipTop}))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Jobs")),r.a.createElement(va.a,null)," "):null,r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},ee?"Accepted Jobs ":"Created Jobs"),className:t.root},h.length>0?h.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{className:t.list,key:e.id,alignItems:"flex-start",onClick:function(){return F(e)}},r.a.createElement(Ma.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},r.a.createElement("b",null,"Time")," : ",new Date(e.time).toLocaleString()," ",r.a.createElement("br",null),"   ",r.a.createElement("b",null,"Address")," : ",e.source))}),r.a.createElement(d.a,{className:t.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(gn.a,{avatar:r.a.createElement(At.a,null,"$"),size:"small",color:"secondary",label:"".concat(e.price)}),r.a.createElement(gn.a,{size:"small",color:"primary",label:e.status,className:t.chipTop}))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Jobs")),r.a.createElement(va.a,null),ee?null:r.a.createElement("span",null," ",r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},"Pending Job Reviews/ Tip"),className:t.root},T.length>0?T.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{key:e.id,className:t.list,alignItems:"flex-start",onClick:function(){return F(e)}},r.a.createElement(Ma.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},"Time : ",new Date(e.time).toLocaleString(),"  ",r.a.createElement("br",null),"   Address : ",e.source))}),r.a.createElement(d.a,{className:t.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(gn.a,{avatar:r.a.createElement(At.a,null,"$"),size:"small",color:"secondary",label:"".concat(e.price)}),r.a.createElement(gn.a,{size:"small",color:"primary",label:"Review Pending",className:t.chipTop,deleteIcon:(e.status,r.a.createElement(dt.a,null))}))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Jobs")),r.a.createElement(va.a,null)," "),r.a.createElement(Fa.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:r.a.createElement(Wa.a,{className:t.subHeader,component:"div",id:"nested-list-subheader"},ee?"Completed Jobs ":"Closed Jobs"),className:t.root},y.length>0?y.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{key:e.id,className:t.list,alignItems:"flex-start",onClick:function(){return F(e)}},r.a.createElement(Ma.a,{primary:e.title,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{component:"span",variant:"body2",className:t.inline,color:"textPrimary"},"Time : ",new Date(e.time).toLocaleString(),"  ",r.a.createElement("br",null),"   Address : ",e.source))}),r.a.createElement(d.a,{className:t.buttonGird,container:!0,direction:"row",justify:"flex-end",alignItems:"flex-end"},r.a.createElement(gn.a,{avatar:r.a.createElement(At.a,null,"$"),size:"small",color:"secondary",label:"".concat(e.price)}),r.a.createElement(gn.a,{size:"small",color:"primary",label:e.status,className:t.chipTop,deleteIcon:(e.status,r.a.createElement(dt.a,null))}))),r.a.createElement(va.a,{variant:"inset",component:"li"}))})):r.a.createElement("div",null,"No Jobs")),z?r.a.createElement(Ln,{user:se,setIsEmployee:ee,data:K,openPop:z,close:function(e,t,a){if(H(!1),window.scrollTo(0,0),e)if(ee){if("assinged"==t.status){var n=c.filter((function(e){return e.id!==t.id}));h.push(t),B(h),$(n)}else if("unassign"===a){n=h.filter((function(e){return e.id!==t.id}));B(n),c.push(t),$(c)}else if("open"==t.status){if("Bid"===t.ticketType&&t.execptedPrice){var r=c.filter((function(e){return e.id!==t.id})),i=!1;C.forEach((function(e,a){e.id===t.id&&(C[a]=t,i=!0)})),!1===i&&C.push(t),L(C),$(r)}}else if("completed"==t.status){n=h.filter((function(e){return e.id!==t.id}));B(n),console.log("empcompletedJob",t),y.push(t),console.log("empcompletedJob",n,y),Y(JSON.parse(JSON.stringify(y)))}}else if("closed"===t.status){n=h.filter((function(e){return e.id!==t.id}));y.push(t),Y(y),B(n)}else if("completed"===t.status){if(t.userClosedComment){y.push(t),Y(JSON.parse(JSON.stringify(y)));var o=T.filter((function(e){return e.id!==t.id}));D(JSON.parse(JSON.stringify(o)))}}else console.log("updateTicket",t),h.forEach((function(e,a){e.id===t.id&&(h[a]=t)})),B(h)}}):null),0==ee?r.a.createElement(Xe.a,{title:"Add","aria-label":"add"},r.a.createElement(Yn.a,{color:"primary",className:t.absolute},r.a.createElement(Jn.a,{onClick:function(){console.log("createJob",se),(null===se||void 0===se?void 0:se.cardInfo)?(console.log("createJob"),q.push("/createticket")):fe("You need to update your profile and payment details before you can request for services")}}))):null,r.a.createElement(Ct,{variant:"error",message:me,setMessage:function(e){return he(e)}})))):r.a.createElement(Ft,null)}var Hn=a(923),Gn=(a(287),a(104)),Vn=a(106),Kn=a(107),Zn=a(108),Xn=a(109),Qn=a(314),er=a.n(Qn),tr=a(315),ar=a.n(tr),nr=a(935),rr=a(921),ir=a(922),or=a(41),cr=a(844);var sr=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e,n){return Object(Vn.a)(this,a),t.call(this,e,n)}return Object(Kn.a)(a,[{key:"render",value:function(){return r.a.createElement(cr.a,{className:"chatApp__convTitle_modifed_root",disableTypography:!0},r.a.createElement(er.a,{className:"chatApp__convTitle_modifed_btn",color:"primary",onClick:this.props.backButton}),r.a.createElement(E.a,{className:"chatApp__convTitle_modifed_title",variant:"h6"},this.props.owner?this.props.owner:"Chat"))}}]),a}(r.a.Component),lr=null,ur=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e){var n;return Object(Vn.a)(this,a),(n=t.call(this,e)).messageInput=void 0,n.ownerInput=void 0,n.ownerAvatarInput=void 0,n.handleFileChange=function(e){var t=e.target.files[0];if(console.log(t),t&&t.type.startsWith("image/")){var a=new FileReader,r=Object(Gn.a)(n);a.onload=function(e){r.setState({popoverOpen:!0,filePreviewSrc:this.result})},a.readAsDataURL(t),n.setState({file:t}),lr=t}},n.close=function(){n.setState({file:void 0,popoverOpen:!1}),lr=null},n.handleChange=function(e){n.messageInput.value=e.target.value},n.state={popoverOpen:!1,content:"",messageInput:"",file:"",filePreviewSrc:""},n.handleSendMessage=n.handleSendMessage.bind(Object(Gn.a)(n)),n}return Object(Kn.a)(a,[{key:"handleSendMessage",value:function(e){e.preventDefault(),(lr||this.messageInput.value.length>0)&&(this.props.sendMessageLoading(this.messageInput.value),this.messageInput.value="",this.close())}},{key:"render",value:function(){var e=this,t=this.state.filePreviewSrc,a="btn btn-block "+(this.state.file?"btn-success":"btn-primary"),n=this.props.isLoading?"chatApp__convButton--loading":"",i=r.a.createElement(ar.a,{color:"action"});return r.a.createElement("form",{onSubmit:this.handleSendMessage},r.a.createElement("div",{className:"chatApp__convButtonLeft"+n},r.a.createElement("input",{accept:"image/*",className:"zeroWidth",id:"icon-button-file",onChange:this.handleFileChange,type:"file"}),r.a.createElement("label",{className:"fileUploadIcon",htmlFor:"icon-button-file"},r.a.createElement(R.a,{color:"primary",className:"fileUploadIcon","aria-label":"upload picture",component:"span"},r.a.createElement(On.a,{className:"fileUploadIcon"}))),r.a.createElement("label",{className:a,id:"Popover1"},r.a.createElement("i",{className:"fas fa-camera"})),r.a.createElement(nr.a,{placement:"top-start",isOpen:this.state.popoverOpen,target:"Popover1"},r.a.createElement(rr.a,null,r.a.createElement("span",null,"Preview"),r.a.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:this.close},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement(ir.a,null,r.a.createElement("img",{alt:"previw",className:"msg-image",src:t})))),r.a.createElement("input",{type:"hidden",ref:function(t){return e.ownerInput=t},value:this.props.owner}),r.a.createElement("input",{type:"hidden",ref:function(t){return e.ownerAvatarInput=t},value:this.props.ownerAvatar}),r.a.createElement("input",{type:"text",ref:function(t){return e.messageInput=t},className:"chatApp__convInput",placeholder:"Text message"}),r.a.createElement("div",{className:"chatApp__convButton "+n,onClick:this.handleSendMessage},i))}}]),a}(r.a.Component),pr=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e){return Object(Vn.a)(this,a),t.call(this,e)}return Object(Kn.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"chatApp__convTimeline"},this.props.messages.slice(0).reverse().map((function(t){return r.a.createElement(dr,{key:t.id,owner:e.props.owner,sender:t.owner,ownerAvatar:e.props.ownerAvatar,senderAvatar:e.props.senderAvatar,message:t.content,file:t.file})})))}}]),a}(r.a.Component),dr=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e){var n;return Object(Vn.a)(this,a),(n=t.call(this,e)).senderAvatar=n.props.owner==n.props.sender?n.props.ownerAvatar:n.props.senderAvatar,n.state={fileUrl:null,key:""},n}return Object(Kn.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=e.file,n=this.props.file,r=null;n&&(r=JSON.parse(n)),a&&null===a.key&&r&&r.key&&this.checkFileUrl()}},{key:"componentDidMount",value:function(){var e=Object(I.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkFileUrl();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkFileUrl",value:function(){var e=Object(I.a)(N.a.mark((function e(){var t,a,n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.file)){e.next=14;break}if(a=JSON.parse(t),n=Array.isArray(a)?a[0]:a,!(r=M.d.getItem(n.key))){e.next=8;break}return this.setState({key:n.key}),e.abrupt("return",this.setState({fileUrl:r}));case 8:return e.next=10,Object(fa.getImages)([n]);case 10:r=e.sent,i=new Date((new Date).getTime()+84e4).getTime(),M.d.setItem(n.key,r,{expires:i}),this.setState({fileUrl:r});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.owner==this.props.sender?"highlight msg-right":"highlight",t=this.props.owner==this.props.sender?"chatApp__convMessageItem--right":"chatApp__convMessageItem--left";return r.a.createElement("div",{className:"chatApp__convMessageItem "+t+" clearfix"},r.a.createElement("img",{src:this.senderAvatar,alt:this.props.sender,className:"chatApp__convMessageAvatar"}),this.props.file&&this.state.fileUrl?r.a.createElement("div",{className:e},r.a.createElement("img",{alt:"awesome",src:this.state.fileUrl,className:"msg-image",id:"ImgPopover"})):r.a.createElement("div",{className:"chatApp__convMessageValue",dangerouslySetInnerHTML:{__html:this.props.message}}))}}]),a}(r.a.Component),mr=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e){var n;Object(Vn.a)(this,a),(n=t.call(this,e)).state={isLoading:!1},n.sendMessageLoading=n.sendMessageLoading.bind(Object(Gn.a)(n));return n}return Object(Kn.a)(a,[{key:"sendMessageLoading",value:function(e){var t=this;this.setState({isLoading:!0}),this.props.sendMessage(e),setTimeout((function(){t.setState({isLoading:!1})}),400)}},{key:"render",value:function(){return r.a.createElement("div",{className:"chatApp__conv",style:window.screen.width>700?{width:600,marginTop:30,marginBottom:30}:{width:window.screen.width-25}},r.a.createElement(na.a,{elevation:3,style:{padding:10}},r.a.createElement(sr,{owner:this.props.senderUsername,backButton:this.props.backButton}),r.a.createElement(pr,{owner:this.props.owner,ownerAvatar:this.props.ownerAvatar,messages:this.props.messages,senderAvatar:this.props.senderAvatar}),r.a.createElement("div",{className:"chatApp__convSendMessage clearfix"},r.a.createElement(ur,{isLoading:this.state.isLoading,owner:this.props.owner,ownerAvatar:this.props.ownerAvatar,sendMessage:this.props.sendMessage,sendMessageLoading:this.sendMessageLoading,senderUsername:this.props.senderUsername}))))}}]),a}(r.a.Component),fr=function(e){Object(Xn.a)(a,e);var t=Object(Zn.a)(a);function a(e){var n;return Object(Vn.a)(this,a),(n=t.call(this,e)).sendMessage=function(){var e=Object(I.a)(N.a.mark((function e(t){var a,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.trim().length||lr){e.next=2;break}return e.abrupt("return");case 2:if(!lr){e.next=11;break}return e.next=5,Object(fa.handleImageUpload)([lr]);case 5:r=e.sent,console.log("file for s3",r),i=JSON.stringify(r),a={id:Object(or.v4)(),isSent:"false",chatbot:!1,file:i,messageConversationId:n.props.selectedConv.convId,receiver:n.props.selectedConv.sender,receiverNumber:n.props.selectedConv.phoneNumber},e.next=12;break;case 11:a={id:Object(or.v4)(),isSent:"false",chatbot:!1,content:t,messageConversationId:n.props.selectedConv.convId,receiver:n.props.selectedConv.sender,receiverNumber:n.props.selectedConv.phoneNumber};case 12:return e.prev=12,e.next=15,M.a.graphql(Object(M.i)(De,{input:a}));case 15:e.sent,e.next=20;break;case 18:e.prev=18,e.t0=e.catch(12);case 20:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t){return e.apply(this,arguments)}}(),n.state={messages:[{id:1,sender:"Shun",senderAvatar:"https://i.pravatar.cc/150?img=32",message:"Hello \ud83d\udc4b"}]},n.sendMessage=n.sendMessage.bind(Object(Gn.a)(n)),n}return Object(Kn.a)(a,[{key:"componentDidMount",value:function(){var e=Object(I.a)(N.a.mark((function e(){var t,a,n,r,i,o,c=this;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.selectedConv.convId,a=this.props.selectedConv.owner,e.prev=2,e.next=5,M.a.graphql(Object(M.i)(le,{id:t}));case 5:n=e.sent,console.log("messages",n),n.data.getConvo.messages?(r=n.data.getConvo.messages.items,this.setState({messages:r.reverse()}),i=r.filter((function(e){return"false"===e.isSent&&c.props.selectedConv.sender===e.owner})).map((function(e){return e.id})),console.log("messagesids",i),i.length>0&&(o={response:!0,body:{ids:i,userId:a},headers:{}},M.a.post("chatreplyapi","/chatreplyfun",o))):this.setState({messages:[]}),M.a.graphql(Object(M.i)(Za,{messageConversationId:t})).subscribe({next:function(e){var t=e.value.data.onCreateMessage,n=c.state.messages;n.push(t),c.setState({messages:n}),console.log("newMessage",t),a!==t.owner&&(console.log("updatedflag",t,a),M.a.graphql(Object(M.i)(Fe,{id:t.id})))}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("error: ",e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=[],t=[],a=this.state.messages,n=this.sendMessage;e[0]={name:"de1aa72c-0ab0-472b-9eed-2e88693321ee",avatar:"https://i.pravatar.cc/150?img=32"};var i=this.props.selectedConv,o=this.props.backButton;return Object.keys(e).map((function(c){e[c];t.push(r.a.createElement(mr,{key:c,owner:i.owner,ownerAvatar:i.ownerAvatar,senderAvatar:i.senderAvatar,sendMessage:n,messages:a,backButton:o,senderUsername:i.senderUsername}))})),r.a.createElement("div",null,window.screen.width>700?r.a.createElement("div",{style:window.screen.width>700?{maxWidth:600,marginLeft:"auto",marginRight:"auto"}:{maxWidth:window.screen.width},className:"chatApp__room"},r.a.createElement("main",{style:window.screen.width>700?{maxWidth:600,marginLeft:"auto",marginRight:"auto"}:{maxWidth:window.screen.width}},r.a.createElement(na.a,{elevation:3},t))):r.a.createElement("div",{style:window.screen.width>700?{maxWidth:600}:{maxWidth:window.screen.width},className:"chatApp__room"},t))}}]),a}(r.a.Component),hr=a(924),br=a(316),gr=a.n(br),vr=Object(j.a)((function(e){return Object(O.a)({root:{width:"100%",backgroundColor:e.palette.background.paper},inline:{display:"inline"},button:{width:20,marginTop:15,padding:5,margin:e.spacing(1)},rating:{marginLeft:15},buttonCart:{marginLeft:5,marginTop:15,width:10},buttonGird:{width:90},cartLabel:{width:10,marginBottom:8,marginLeft:5}})}));function yr(){var e=vr(),t=r.a.useState([]),a=Object(p.a)(t,2),i=a[0],o=a[1],c=Object(n.useContext)(s.a),l=r.a.useState(!1),m=Object(p.a)(l,2),f=m[0],h=m[1],b=r.a.useState({convId:"",senderUsername:"",owner:"",ownerAvatar:"",senderAvatar:"",sender:"",phoneNumber:""}),g=Object(p.a)(b,2),v=g[0],y=g[1],E=r.a.useState([]),w=Object(p.a)(E,2),j=w[0],O=w[1],C=r.a.useState({}),k=Object(p.a)(C,2),x=k[0],S=k[1],T=Object(u.h)();Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){T&&function(){var e=Object(I.a)(N.a.mark((function e(t){var a,n,r,i,o,c,s,l,u,p;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.state||!t.state.conversation){e.next=18;break}return console.log(t),r=t.state.conversation.conversation,i=t.state.user,o=r.associated.items.filter((function(e){return e.convoLinkUserId==i||e.convoLinkEmployeeId==i})),c=r.associated.items.filter((function(e){return!(e.convoLinkUserId==i||e.convoLinkEmployeeId==i)})),console.log("selected file",o,c),s=JSON.parse(o[0].user.avatar),e.next=10,Object(fa.getCacheImage)(s[0]);case 10:return l=e.sent,S(l),u=JSON.parse(c[0].user.avatar),e.next=15,Object(fa.getCacheImage)(u[0]);case 15:p=e.sent,y({convId:r.id,owner:i,ownerAvatar:l,senderAvatar:p,phoneNumber:null===(a=c[0].user)||void 0===a?void 0:a.phoneNumber,senderUsername:null===(n=c[0].user)||void 0===n?void 0:n.username,sender:c[0].convoLinkUserId}),h(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(T)}),[T]),Object(n.useEffect)((function(){var e=function(){var e=Object(I.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(N.a.mark((function e(){var a,n,r,s,l,u,p,d,m,f,h,b,g,v,y,E;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.userId,c.user.attributes["custom:account_type"],e.next=4,M.a.graphql(Object(M.i)(de,{id:a}));case 4:if(n=e.sent,console.log("commentData",n),!(n.data.getUser&&n.data.getUser.userConversations.items.length>0)){e.next=32;break}return r=n.data.getUser.userConversations.items,s=JSON.parse(n.data.getUser.avatar),e.next=11,Object(fa.getCacheImage)(s[0]);case 11:l=e.sent,S(l),t=0;case 14:if(!(t<r.length)){e.next=31;break}if(m=r[t],f=m.conversation.associated.items.filter((function(e){return!(e.convoLinkUserId===a||e.convoLinkEmployeeId==a)})),h=null!==(u=null===(p=f[0].user)||void 0===p?void 0:p.avatar)&&void 0!==u?u:null===(d=f[0].employee)||void 0===d?void 0:d.avatar,!f[0].user){e.next=27;break}return e.next=21,Object(fa.getCacheImage)(JSON.parse(h)[0]);case 21:r[t].avatar=e.sent,r[t].username=null===(b=f[0].user)||void 0===b?void 0:b.username,r[t].receiver=null!==(g=f[0].convoLinkEmployeeId)&&void 0!==g?g:f[0].convoLinkUserId,r[t].phoneNumber=f[0].user.phoneNumber,e.next=28;break;case 27:r[t].username="User profile missing contact support";case 28:t++,e.next=14;break;case 31:o(r);case 32:return e.next=34,M.a.graphql(Object(M.i)(pe,{receiver:a,isSent:"false"}));case 34:(v=e.sent).data.messageByReceiver&&v.data.messageByReceiver.items.length>0&&(y=v.data.messageByReceiver.items,E=[],y.forEach((function(e){E.push(e.owner)})),console.log("commentschatsLinks",E,i),O(E));case 36:case"end":return e.stop()}}),e)}))(),"t0",2);case 2:e.next=7;break;case 4:e.prev=4,e.t1=e.catch(0),console.log("unable get conversation for users:",e.t1);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(){return e.apply(this,arguments)}}();c.userId&&e()}),[c.userId]);return r.a.createElement("div",null,0==f?r.a.createElement(Sa,{title:"Travtail Serverless"},r.a.createElement(Fa.a,{className:e.root},i.length>0?i.map((function(e,t){return r.a.createElement("div",{key:e.id},r.a.createElement(Ja.a,{key:e.id,alignItems:"flex-start",dense:!0,button:!0,onClick:(a=e,function(){y({convId:a.conversation.id,owner:c.userId,ownerAvatar:x,senderAvatar:a.avatar,senderUsername:a.username,phoneNumber:a.phoneNumber,sender:a.receiver}),h(!0)})},r.a.createElement(Hn.a,null,r.a.createElement(At.a,{alt:"Remy Sharp",src:e.avatar})),r.a.createElement(Ma.a,{primary:e.username}),r.a.createElement(hr.a,null,r.a.createElement(R.a,{edge:"end","aria-label":"comments"},r.a.createElement(me.a,{color:"secondary",overlap:"circle",badgeContent:" ",invisible:!j.includes(e.receiver)},r.a.createElement(gr.a,{color:"action"}))))),r.a.createElement(va.a,{variant:"inset",component:"li"}));var a})):r.a.createElement(d.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement("div",null,"No Message Available ")))):r.a.createElement("div",null,r.a.createElement(fr,{selectedConv:v,backButton:function(){var e=j.filter((function(e){return e!==v.sender}));O(e),h(!1),window.scrollTo(0,0)}})))}var Er=Object(j.a)((function(e){return{root:function(t){return{width:"100%",maxWidth:window.screen.width>700?600:window.screen.width-25,backgroundColor:e.palette.background.paper}},subHeader:{fontSize:"1rem",fontWeight:900,paddingLeft:0,paddingRight:0,color:"#3f51b5"},inline:{display:"inline"},button:{width:20,marginTop:15,padding:5,margin:e.spacing(1)},rating:{marginLeft:15},paper:Object(aa.a)({padding:e.spacing(2),boxShadow:window.screen.width>700?"":"unset"},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),layout:Object(aa.a)({width:window.screen.width>700?600:window.screen.width-25},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),buttonCart:{marginLeft:5,marginTop:15,width:10},buttonGird:{width:90},list:{paddingLeft:0,paddingRight:0},cartLabel:{fontWeight:900,backgroundColor:"rgba(0, 0, 0, 0.18)",width:50,marginBottom:8,marginTop:8,marginLeft:5,borderRadius:5,paddingLeft:5,color:"black !important"},absolute:{position:"fixed",zIndex:100,bottom:e.spacing(9),right:e.spacing(4)},fab:{margin:e.spacing(2)},chipTop:{marginTop:10}}}));function wr(){var e={width:Object(Mn.a)("(min-width:600px)")?600:window.screen.width-50},t=Er(e),a=r.a.useContext(s.a),i=r.a.useState([]),o=Object(p.a)(i,2),c=o[0],l=o[1],u=r.a.useState(!1),d=Object(p.a)(u,2),m=(d[0],d[1]);Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){a&&a.userId&&(m(!0),function(){var e=Object(I.a)(N.a.mark((function e(){var t,n,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.graphql(Object(M.i)(ce,{id:a.userId}));case 2:t=e.sent,console.log("userReviews",t),t.data.getUser&&((n=t.data.getUser).rating&&(r=JSON.parse(n.rating),j(parseFloat(r.rating))),i=n.reviews.items,l(i));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()())}),[a.userId]);var f=Object(n.useState)(""),h=Object(p.a)(f,2),b=h[0],g=h[1],v=Object(n.useCallback)((function(e){g(e)}),[]),y=r.a.useState(0),E=Object(p.a)(y,2),w=E[0],j=E[1];return a&&a.userId?r.a.createElement(Sa,{title:"Ticket List",header:"Home"},r.a.createElement("main",{className:t.layout},r.a.createElement(na.a,{className:t.paper},r.a.createElement(kn,{rating:w,name:"Your",reviews:c}),r.a.createElement(Ct,{variant:"error",message:b,setMessage:function(e){return v(e)}})))):r.a.createElement(Ft,null)}var jr=[{id:"1",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/personalhelper.jpg",name:"Personal Helper",items:[{id:"11",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/personalshopper.jpg",name:"Personal Shopper",price:"$30",content:["1 hour is the minimum service duration."," There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"12",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/runerrands.jpg",name:"Run Errands",price:"$30",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials."]},{id:"13",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/luggagestorage.jpg",name:"Luggage Storage",price:"$30",content:["There are no refunds luggage stored for less than a day","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"14",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/airportpickup.jpg",name:"Airport Pickup",price:"$30",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"15",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/grocerystoredriver.jpg",name:"Grocery Store Driver",price:"$30",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"16",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/grocerypickup.jpg",name:"Grocery Pickup",price:"$20",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"17",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/medicationspickup.jpg",name:"Medications Pickup",price:"$25",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"18",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/drivesomewhere.jpg",name:"Drive Me Somewhere",price:"$45",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"19",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/othershopping.jpg",name:"Other Shopping",price:"$30",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"2",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/plumbingservices.jpg",name:"Plumbing Services",items:[{id:"21",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/emergencyplumbing.jpg",name:"Emergency Plumbing",price:"$150",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"22",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/blockedsewerline.jpg",name:"Fix Blocked Sewer Line",price:"$150",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials."]},{id:"23",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/brokenpike.jpg",name:"Fix Broken Pipe",price:"$150",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"24",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cloggedplumbing.jpg",name:"Fix Clogged Plumbing System",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"25",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cloggedtoilet.jpg",name:"Fix Clogged Toilet",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"26",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/gasleak.jpg",name:"Fix Gas Leak",price:"$200",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"27",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/otherleak.jpg",name:"Fix Other Leak",price:"$150",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"28",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/dishwashergarbagedisposal.jpg",name:"Install Dishwasher/Garbage Disposal",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"29",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/otherplumbing.jpg",name:"Other Plumbing Service",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"3",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//handyman.jpg",name:"Handyman Services",items:[{id:"31",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/furnitureassembly.jpg",name:"Furniture Assembly",price:"$30",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"32",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cloggedtoilethandy.jpg",name:"Fix Clogged Toilet",price:"$70",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials."]},{id:"33",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fixfurniture.jpg",name:"Fix Furniture/Door",price:"$70",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"34",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fixsmallelectrical.jpg",name:"Fix Small Electrical Issue",price:"$70",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"35",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/installgate.jpg",name:"Install Gate/Awnings",price:"$90",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"36",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/mount.jpg",name:"Mount TV/Something Else",price:"$70",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"37",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/painting.jpg",name:"Painting Services",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"38",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/smallconstructionproject.jpg",name:"Small Construction Project",price:"$90",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"39",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fixinstallsomethingelse.jpg",name:"Fix/Install Something Else",price:"100$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"4",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//lawnlandscape.jpg",name:"Lawn Mower/Landscaping/Tree Services",items:[{id:"41",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/lawnmowing6.jpg",name:"Lawn/Yard Mowing (Less than 6 inches)",price:"$40",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"42",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/lawn69.jpg",name:" Lawn/Yard Mowing (6-9 inches)",price:"$65",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials."]},{id:"43",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/lawn912.jpg",name:"Lawn/Yard Mowing (9-12 inches)",price:"$110",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"44",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/lawn1foot.jpg",name:"Lawn/Yard Mowing (More than 1 foot tall)",price:"$150",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"45",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/landscapping.jpg",name:"Landscaping Services",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"46",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/shrubbushremoval.jpg",name:"Shrub/Bush Removal",price:"$60",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"47",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/treeremoval25ft.jpg",name:"Tree Removal (less than 25ft)",price:"$200",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"48",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/treeremovalmorethan25ft.jpg",name:"Tree Removal (more than 25ft)",price:"$300",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"49",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/deadwood.jpg",name:"Dead Wood Removal/Land Clearing",price:"100$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"5",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//cleaningservices.jpg",name:"Cleaning Services",items:[{id:"51",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleanbathrooms.jpg",name:"Clean Bathrooms",price:"$60",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"52",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleandishes.jpg",name:"Clean Dishes",price:"$40",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"53",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleanfullhouseempty.jpg",name:"Clean Empty House/Apartment",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"54",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleanemptyhouse.jpg",name:"Clean Entire House/Apartment",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"55",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/commercialcleaning.jpg",name:"Commercial/Office Cleaning",price:"$120",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"56",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleanwindows.jpg",name:"Windows Cleaning",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"57",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/cleankitchen.jpg",name:"Clean Kitchen",price:"$60",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"58",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/laundarydrycleaning.jpg",name:"Laundry and Dry-Cleaning Services",price:"$25",content:["Recommended price is based on pick up and drop off location within the same city","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"59",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/othercleaning.jpg",name:"Other Cleaning Services",price:"80$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"6",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//deliveryservices.jpg",name:"Delivery Services",items:[{id:"61",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/appliancepickup.jpg",name:"Appliance Pickup and Delivery",price:"$60",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"62",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/deliverfood.jpg",name:"Deliver Food to Customers",price:"$25",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"63",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/drycleaningpickup.jpg",name:"Dry Cleaning Pickup and Drop-off",price:"$25",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"64",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/pickupmedications.jpg",name:"Medications Pickup",price:"$35",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"65",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/heavyitem.jpg",name:"Other Heavy Item Pick Up and Deliver",price:"$60",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"66",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/foodpickup.jpg",name:"Pick Up Food",price:"$20",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"67",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/pickupother.jpg",name:"Pick Up Other Items",price:"40$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"7",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//appliances.jpg",name:"Appliance Repair/Installation Services",items:[{id:"71",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/appliancepickup.jpg",name:"Appliance Pick Up and Delivery",price:"$60",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"72",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fixotherappliance.jpg",name:"Fix Other Appliance",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"73",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/haulanddispose.jpg",name:"Haul and Dispose Old Appliance",price:"$90",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:" 74",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/installrangeoven.jpg",name:"Install Range, Oven or Dishwasher",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"75",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/installsomethingelse.jpg",name:"Install Something Else",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"76",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/mountTV.jpg",name:"Mount TV or Something Else",price:"40$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"8",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//generalcontractor.jpg",name:"General Services",items:[{id:"81",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/generalcontractor.jpg",name:"General Contractor",price:"$100",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"82",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/generallabor.jpg",name:"General or Event Labor",price:"$20",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"83",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/othergeneral.jpg",name:"Other General Services",price:"40$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]},{id:"9",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job//movinghauling.jpg",name:"Moving/Hauling Services",items:[{id:"91",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/appliancefurnituremoving.jpg",name:"Appliance and Furniture Moving/Hauling",price:"$80",content:["1 hour is the minimum service duration.","There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"92",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/carpetremoval.jpg",name:"Carpet Removal and Disposal",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials."]},{id:"93",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fullservicemoving1.jpg",name:"Same City Full Service Moving (Packing Boxes, Loading only)",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per day","You cannot lower the price after the job is accepted or a bid has been placed but you can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"94",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fullservicemoving2.jpg",name:"Same City Full Service Moving (Packing Boxes, Loading, Unloading only)",price:"$130",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed. You can negotiate pricing directly with the service provider). The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"95",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/fullservicemoving3.jpg",name:"Same City Full Service Moving (Packing Boxes, Truck, Loading, Unloading)",price:"$160",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"96",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/intercity.jpg",name:"Intercity Full Service Moving",price:"$100",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"97",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/interstate.jpg",name:"Interstate Full Service Moving",price:"$80",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"98",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/junkremoval.jpg",name:"Junk Removal",price:"$50",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]},{id:"99",image:"https://raw.githubusercontent.com/CharanRoot/travtail-services/app-images/app-create-job/loadpack.jpg",name:"Load/Unload Truck, Pack/Unpack Boxes",price:"50$",content:["There are no refunds for jobs completed in less than 1 hour.","Recommended price is per hour","You cannot lower the price after the job is accepted or a bid has been placed.","You can negotiate pricing directly with the service provider.","The service provider will inform you if materials or other expenses are required to fulfill your service request. Receipts will be uploaded."]}]}],Or=a(931),Cr=a(925),kr=a(926),xr=a(927),Sr=Object(j.a)((function(e){return Object(O.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper},paper:Object(aa.a)({padding:e.spacing(2),boxShadow:window.screen.width>700?"":"unset"},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),layout:Object(aa.a)({width:window.screen.width>700?600:window.screen.width-25},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),stepper:{padding:5},icon:{color:"rgba(255, 255, 255, 0.54)"},imgTitle:{"& div":{marginRight:"0",marginLeft:"6px","& div":{fontSize:"0.8rem",lineHeight:"15px",whiteSpace:"unset",textOverflow:"unset"}}}})})),Tr=function(e){var t=e.data,a=e.close,n=Sr(),i=function(e){return function(){a(e)}};return r.a.createElement(Cr.a,{className:n.stepper,cellHeight:125},t.map((function(e){return r.a.createElement(kr.a,{key:e.id,onClick:i(e)},r.a.createElement("img",{src:e.image,alt:e.name}),r.a.createElement(xr.a,{className:n.imgTitle,title:e.name}))})))},Nr=a(945),Ir=a(929),Rr=a(928),Pr=a(317),Ur=a.n(Pr),_r=a(930),qr=a(318),Ar=a.n(qr),Dr=Object(j.a)((function(e){return Object(O.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"90.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary,fontWeight:900},rootBody:{flexGrow:1},img:{display:"block",marginLeft:"auto",marginRight:"auto"},lineBreak:{whiteSpace:"pre-line"},itemText:{"& span":{fontSize:"0.8rem"}}})})),$r=function(e){var t=e.jobData,a=e.close,n=Dr(),i=r.a.useState(!1),o=Object(p.a)(i,2),c=o[0],s=o[1];return r.a.createElement("div",{className:n.root},t.items.length>0?t.items.map((function(e,t){return r.a.createElement(Nr.a,{key:e.id,expanded:c===e.id,onChange:(o=e.id,function(e,t){s(!!t&&o)})},r.a.createElement(Rr.a,{expandIcon:r.a.createElement(Ur.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(E.a,{className:n.heading},e.name),r.a.createElement(E.a,{className:n.secondaryHeading},e.price)),r.a.createElement(va.a,null),r.a.createElement(Ir.a,null,r.a.createElement("div",{className:n.rootBody},r.a.createElement(d.a,{container:!0,style:{padding:0},spacing:3},r.a.createElement(d.a,{style:{padding:0},className:n.img,item:!0,xs:8,sm:6},r.a.createElement(Sn.a,{src:e.image})),r.a.createElement(d.a,{style:{padding:"0 0 0 8px"},item:!0,xs:12,sm:6},r.a.createElement("div",{className:"lineBreak"},e.content.map((function(e,t){return r.a.createElement(Ja.a,{key:t,button:!0,style:{padding:0}},r.a.createElement(qn.a,{style:{minWidth:"35px"}},r.a.createElement(Ar.a,null)),r.a.createElement(Ma.a,{className:n.itemText,primary:e}))}))))))),r.a.createElement(_r.a,null,r.a.createElement(kt.a,{onClick:(i=e,function(){a(i)}),variant:"contained",size:"small",color:"primary"},"Select")));var i,o})):r.a.createElement("div",null))},Br=Object(j.a)((function(e){return{appBar:{position:"relative"},layout:Object(aa.a)({width:"auto"},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(aa.a)({paddingLeft:10,paddingRight:5,paddingBottom:5},e.breakpoints.up(600+2*e.spacing(3)),{marginBottom:e.spacing(6),padding:e.spacing(3)}),buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},time:{display:"block",margin:"10px 0 5px 0",padding:"10px 14px"},date:{display:"block",boxShadow:"none",margin:"10px 0 5px 0",padding:"10px 14px",fontFamily:"Roboto,sans-serif",fontWeight:400,fontSize:16,lineHeight:1.43,width:250,borderBottom:"1px solid rgba(0, 0, 0, 0.42)"},jobtype:{marginTop:15},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},fileContainer:{padding:0,margin:0,"& div":{padding:"0 !important",margin:"0 !important"}},description:{"& div":{minHeight:"80px !important",alignItems:"start !important"}}}})),Lr=function(e){var t=e.title,a=e.category,i=e.price,o=e.handleBack,c=Br();Object(n.useEffect)((function(){window.scrollTo(0,0)}),[]),Object(n.useEffect)((function(){var e;console.log(a,i,t);var n=i.replace(/\D/gm,"");O(Object(ca.a)({},j,(e={},Object(aa.a)(e,"category",a),Object(aa.a)(e,"price",n),Object(aa.a)(e,"title",t),e)))}),[a,i,t]);var l=function(e){var t=e.target,a=t.name,n=t.value;if("price"==a){var r=/^\d{1,8}(?:\.\d{1,4})?$/.test(n);(""===e.target.value||n.endsWith(".")||r)&&O(Object(ca.a)({},j,Object(aa.a)({},a,n)))}else O(Object(ca.a)({},j,Object(aa.a)({},a,n)))},m=Object(u.g)(),f=r.a.useContext(s.a),h=r.a.useState(!1),b=Object(p.a)(h,2),g=b[0],v=b[1],y=function(){var e=Object(I.a)(N.a.mark((function e(){var t,a,n,r,i,o,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("createNewTicket",j),v(!0),a=f.userId,n=f.user.attributes.phone_number,r=f.user.attributes.email,i=JSON.stringify({email:r,phoneNumber:n}),o=[],!(D.length>0)){e.next=11;break}return e.next=10,Object(pn.c)(D);case 10:o=e.sent;case 11:return c=Object(Pn.uuid)(),e.next=14,M.a.graphql(Object(M.i)(_e,{input:{id:c,countAndId:"".concat(j.county,"_").concat(c),price:j.price,time:j.time,title:j.title,content:j.content,destination:j.destination?j.destination:j.source,source:null!==(t=j.source)&&void 0!==t?t:"Davidson County",county:j.county,ticketFilter:"".concat(j.county,"_").concat(j.category),ownerUploadImages:JSON.stringify(o),ticketUserId:a,status:"open",ticketType:j.ticketType,ticketUserInfo:i,category:j.category}}));case 14:return s=e.sent,new M.f("foo").info("ticketcreated",s),e.next=19,M.a.graphql(Object(M.i)(Pe,{input:{id:Object(Pn.uuid)(),ticketID:c,userID:a}}));case 19:e.sent,M.b.record({name:"ticketCreated",attributes:{ticketID:c,county:j.county,ticketType:j.ticketType,ticketUserId:a}}),v(!1),m.push("/");case 23:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=Object(n.useState)({content:"",price:"",title:"",source:"",destination:"",time:"",county:"",daytime:"",terms:!1,category:"",ticketType:""}),w=Object(p.a)(E,2),j=w[0],O=w[1],C=Object(n.useState)(!0),k=Object(p.a)(C,2),x=k[0],S=k[1];Object(n.useEffect)((function(){var e=j.content,t=j.title,a=j.price,n=j.time,r=j.terms,i=j.ticketType,o=j.category,c=j.source,s=(new Date).getTime()<new Date(n).getTime();n&&!s&&(z("Choose a time that is greater than the current time"),O(Object(ca.a)({},j,{time:""}))),S(!(e&&c&&t&&a&&s&&r&&i&&o))}),[j]);var T=Object(n.useState)(!1),R=Object(p.a)(T,2),P=R[0],U=R[1],_=function(e){var t=e.target,a=t.name,n=t.checked;"destAddress"===a?U(!!n):O(n?Object(ca.a)({},j,{terms:!0}):Object(ca.a)({},j,{terms:!1}))},q=Object(n.useState)([]),A=Object(p.a)(q,2),D=A[0],$=A[1],B=function(){var e=Object(I.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=Object(n.useState)(""),Y=Object(p.a)(L,2),F=(Y[0],Y[1],Object(n.useState)("")),J=Object(p.a)(F,2),W=J[0],z=J[1],H=r.a.useCallback((function(e){z(e)}),[]),G=(sa.map((function(e){return e.value})),r.a.useState("")),V=Object(p.a)(G,2);V[0],V[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:c.layout},r.a.createElement(na.a,{className:c.paper},r.a.createElement(d.a,{container:!0,spacing:1},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{multiline:!0,required:!0,id:"title",name:"title",label:"Title",fullWidth:!0,onChange:l,value:j.title,autoComplete:"title"})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Nt.a,{className:c.jobtype,component:"fieldset"},r.a.createElement(zt.a,{component:"legend"},"Job Type"),r.a.createElement(Mt.a,{row:!0,"aria-label":"position",value:j.ticketType,onChange:function(e){O(Object(ca.a)({},j,Object(aa.a)({},"ticketType",e.target.value)))}},r.a.createElement(Wt.a,{value:"Normal",control:r.a.createElement(Jt.a,null),label:"Normal"}),r.a.createElement(Wt.a,{value:"Bid",control:r.a.createElement(Jt.a,null),label:"Bid"})))),r.a.createElement(d.a,{item:!0,xs:12}),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{required:!0,id:"price",name:"price",label:"Price",fullWidth:!0,onChange:l,value:j.price,autoComplete:"price",InputProps:{startAdornment:r.a.createElement(Pt.a,{position:"start"},"$")}}),r.a.createElement("a",{target:"_blank",href:"http://travtail.app/pricing"},"Recommended Prices"),"."),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(ua,{label:"Start Location",googleAddressReturn:function(e){var t=pa(e);O(Object(ca.a)({},j,{source:t.formatted_address,county:t.county}))}})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Wt.a,{control:r.a.createElement(Xe.a,{title:"Delete"},r.a.createElement(dn.a,{checked:P,onChange:_,name:"destAddress",color:"primary"})),label:"I have a different end location"})),P?r.a.createElement(d.a,{item:!0,xs:12,sm:6},r.a.createElement(ua,{label:"Destination/End Location",googleAddressReturn:function(e){var t=pa(e);O(Object(ca.a)({},j,{destination:t.formatted_address}))}})):null,r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement("label",null,"Time:*"),r.a.createElement(Ea.a,{selected:j.time,onChange:function(e){console.log("handleTimeChange",e),O(Object(ca.a)({},j,Object(aa.a)({},"time",e)))},showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",minTime:Object(An.default)(Object(Dn.default)(new Date,0),7),maxTime:Object(An.default)(Object(Dn.default)(new Date,30),22),minDate:new Date,maxDate:Object($n.default)(new Date,30),placeholderText:"Click to select a date",dateFormat:"MMMM d, yyyy h:mm aa",className:c.date,popperClassName:"some-custom-class",popperPlacement:"top-end",popperModifiers:{offset:{enabled:!0,offset:"5px, 10px"},preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Lt.a,{multiline:!0,required:!0,className:c.description,id:"content",name:"content",label:"Description",fullWidth:!0,onChange:l,value:j.content,autoComplete:"content"})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(ma.a,{className:c.fileContainer,style:{padding:0},withPreview:!0,withIcon:!0,onChange:B,imgExtension:[".jpg",".gif",".png",".jpeg"],maxFileSize:15242880})),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(Wt.a,{control:r.a.createElement(Xe.a,{title:"Delete"},r.a.createElement(dn.a,{checked:j.terms,onChange:_,name:"checkedB",color:"primary"})),label:"Terms of Service"}),r.a.createElement("br",null),"By requesting this service on Travtail, you agree to our terms of service. For questions about our terms of service, please visit ",r.a.createElement("a",{target:"_blank",href:"https://travtail.app/tos"},"travtail"),"."),r.a.createElement(d.a,{container:!0,direction:"row",justify:"flex-end",alignItems:"center"},r.a.createElement(kt.a,{variant:"contained",color:"secondary",onClick:o,className:c.button},"Back"),r.a.createElement(kt.a,{disabled:x,variant:"contained",color:"primary",className:c.button,onClick:y},"Create Request"))))),r.a.createElement(Ct,{variant:"error",message:W,setMessage:function(e){return H(e)}}),r.a.createElement(Ta.a,{className:c.backdrop,open:g},r.a.createElement(Na.a,{color:"inherit"})))};var Yr=Object(j.a)((function(e){return Object(O.a)({root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:e.palette.background.paper,padding:0},gridList:{},paper:Object(aa.a)({padding:0,boxShadow:window.screen.width>700?"":"unset"},e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:0}),layout:Object(aa.a)({width:window.screen.width>700?600:window.screen.width-25},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2),float:"right"},resetContainer:{padding:e.spacing(3)},stepper:{padding:"10px 0px 0px 0px"},stepContent:{padding:0},icon:{color:"rgba(255, 255, 255, 0.54)"}})}));function Fr(){var e=Yr();r.a.useEffect((function(){window.scrollTo(0,0)}),[]);var t=r.a.useState(0),a=Object(p.a)(t,2),n=a[0],i=a[1],o=["Select Job Category","Select Job Type","Create a Service Request"],c=r.a.useState(jr[0]),s=Object(p.a)(c,2),l=s[0],u=s[1],d=r.a.useState(jr[0].items[0]),m=Object(p.a)(d,2),f=m[0],h=m[1],b=function(e){u(e),v()},g=function(e){h(e),v()},v=function(){i((function(e){return e+1}))},y=function(){i((function(e){return e-1}))};return r.a.createElement(Sa,{title:"Create Ticket",header:"Home"},r.a.createElement("main",{className:e.layout},r.a.createElement(na.a,{className:e.paper},r.a.createElement(ra.a,{className:e.stepper,activeStep:n,orientation:"vertical"},o.map((function(t,a){return r.a.createElement(ia.a,{className:e.stepContent,key:t},r.a.createElement(oa.a,null,t),r.a.createElement(Or.a,{className:e.stepContent},function(e){switch(window.scrollTo(0,0),e){case 0:return r.a.createElement(Tr,{data:jr,close:b});case 1:return r.a.createElement($r,{jobData:l,close:g});case 2:return r.a.createElement(Lr,{title:f.name,category:l.name,price:f.price,handleBack:y});default:return"Unknown step"}}(a),1===a?r.a.createElement("div",{className:e.actionsContainer},r.a.createElement("div",null,r.a.createElement(kt.a,{variant:"contained",color:"secondary",disabled:0===n,onClick:y,className:e.button},"Back"),1!==a?r.a.createElement(kt.a,{variant:"contained",color:"primary",onClick:v,className:e.button},n===o.length-1?"Finish":"Next"):null)):null))}))))))}var Jr=function(){Object(u.g)();var e=r.a.useContext(s.a),t=function(t){var a=t.component,n=Object(l.a)(t,["component"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(t){return e.userId?r.a.createElement(a,t):r.a.createElement(u.a,{to:"/auth"})}}))};function a(){}return"github"!==Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_CODE&&(console.warn=a,console.error=a),r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:zn}),r.a.createElement(u.b,{path:"/auth",component:ta}),r.a.createElement(u.b,{path:"/create",component:Fr}),r.a.createElement(t,{path:"/chat",component:yr}),r.a.createElement(t,{path:"/review",component:wr}),r.a.createElement(t,{path:"/profile",component:La}),r.a.createElement(t,{path:"/createticket",component:Fr}),r.a.createElement(t,{path:"/ticketList",component:zn}),"/>")};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Mr=a(138),Wr=JSON.parse(JSON.stringify(Mr.a));M.h.configure(Wr);var zr=r.a.createElement(c.a,{basename:""},r.a.createElement(s.b,null,r.a.createElement(Jr,null)));o.a.render(zr,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(125),r=a(0),i=a.n(r),o=a(227),c=a(9),s=a(844),l=a(225),u=a(73),p=a.n(u),d=a(79),m=Object(c.a)((function(e){return Object(o.a)({root:{margin:0,padding:e.spacing(2),color:"#fff",backgroundColor:"#3f51b5"},title:{color:"#fff",backgroundColor:"#3f51b5"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})}))((function(e){var t=e.children,a=e.classes,r=e.onClose,o=Object(n.a)(e,["children","classes","onClose"]);return i.a.createElement(s.a,Object.assign({disableTypography:!0,className:a.root},o),i.a.createElement(d.a,{className:a.title,variant:"h6"},t),r?i.a.createElement(l.a,{"aria-label":"close",className:a.closeButton,onClick:r},i.a.createElement(p.a,null)):null)}))}},[[353,1,2]]]);